<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Jinni Prolog Compiler - User Guide</title>
  <meta name="Author" content="BinNet Corp.">
  <meta name="Description" content="Prolog Compiler for Java and .NET for Object and Agent Oriented Internet Programming">
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1187.34">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 24.0px 0.0px; text-align: center; font: 24.0px Times; min-height: 29.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times}
    p.p7 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times}
    p.p9 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times; color: #330033}
    p.p10 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times; color: #3333ff}
    p.p11 {margin: 0.0px 0.0px 12.0px 0.0px; font: 10.0px Times}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; min-height: 14.0px}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #3333ff; min-height: 14.0px}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Times; color: #3333ff}
    p.p18 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times; min-height: 14.0px}
    p.p19 {margin: 0.0px 0.0px 6.0px 0.0px; font: 12.0px Times; min-height: 14.0px}
    p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #3333ff}
    p.p21 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #330033}
    p.p23 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #330033; min-height: 14.0px}
    p.p27 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #999900}
    p.p28 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier}
    p.p29 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Times; min-height: 14.0px}
    p.p30 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Times; color: #0000ff}
    p.p37 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; background-color: #3333ff; min-height: 14.0px}
    p.p38 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; background-color: #ffffff}
    p.p39 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; background-color: #ffffff; min-height: 14.0px}
    p.p40 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #3333ff; background-color: #ffffff; min-height: 14.0px}
    p.p41 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #3333ff; background-color: #ffffff}
    p.p42 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Times}
    p.p43 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 10.0px Courier}
    p.p44 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier; color: #0000ee}
    li.li6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times}
    li.li12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Times}
    li.li21 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #330033}
    li.li28 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier}
    li.li31 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #0000ff}
    li.li32 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #ff0000}
    li.li33 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier; color: #ff0000}
    span.s1 {text-decoration: underline ; color: #0000ee}
    span.s2 {text-decoration: underline}
    span.s3 {color: #3333ff}
    span.s4 {color: #330033}
    span.s5 {color: #000000}
    span.s6 {color: #330099}
    span.s7 {color: #000099}
    span.s8 {color: #3366ff}
    span.s9 {color: #0000ff}
    span.s10 {font: 12.0px Courier}
    span.s11 {font: 12.0px Courier; color: #ff0000}
    span.s12 {color: #0000ee}
    span.s13 {font: 12.0px Times}
    span.s14 {font: 12.0px Times; color: #000000}
    span.s15 {font: 12.0px Courier; text-decoration: underline}
    table.t1 {width: 782.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080}
    td.td1 {width: 774.0px; background-color: #ccccff; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 3.0px 3.0px 3.0px 3.0px}
    td.td2 {width: 30.0px; background-color: #ffffff; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 3.0px 3.0px 3.0px 3.0px}
    td.td3 {width: 736.0px; background-color: #ffffff; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 3.0px 3.0px 3.0px 3.0px}
    td.td4 {width: 774.0px; background-color: #eeeeff; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 3.0px 3.0px 3.0px 3.0px}
    td.td5 {width: 774.0px; background-color: #ffffff; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #808080 #808080 #808080 #808080; padding: 3.0px 3.0px 3.0px 3.0px}
    ol.ol1 {list-style-type: decimal}
    ul.ul1 {list-style-type: disc}
    ul.ul2 {list-style-type: circle}
    ul.ul3 {list-style-type: square}
  </style>
</head>
<body>
<p class="p1"><b></b><br></p>
<h1 style="margin: 0.0px 0.0px 32.0px 0.0px; text-align: center; font: 40.0px Times"><span class="s1"><b>Jinni Prolog Compiler</b></span><b>: A High Performance Java - based  Prolog for Object and Agent Oriented Internet Programming</b></h1>
<p class="p1"><b></b><br></p>
<h1 style="margin: 0.0px 0.0px 24.0px 0.0px; text-align: center; font: 25.0px Times"><b>USER GUIDE - note that this has been edited last time in 2006 - some things have changed since then</b></h1>
<h1 style="margin: 0.0px 0.0px 24.0px 0.0px; text-align: center; font: 36.0px Times; min-height: 43.0px"><b></b><br></h1>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>About Jinni</b></h2>
<p class="p6">Jinni (<span class="s2"><b>J</b></span>ava <span class="s2"><b>IN</b></span>ference engine and <span class="s2"><b>N</b></span>etworked<span class="s2"><b>I</b></span><b>nteractor</b>), is a lightweight, <i>multi-threaded</i> compiled <b>Prolog</b> system with powerful Object and Agent Oriented extensions, intended to be used as a flexible scripting tool for gluing together knowledge processors with <b>Java</b> and <b>.NET</b> componets in <i>distributed</i> applications. Jinni 's high level, portable, secure networking layer provides intelligent interoperation between Java and .NET components on Windows on Linux/Unix. Jinni is likely to be easily ported to Android platforms.</p>
<p class="p7">Jinni threads are coordinated through <i>blackboards</i>, local to each process. Associative search based on term <i>unification</i> (a variant of Linda) is used as the basic <i>synchronization</i> mechanism. Threads, blackboard and networking operations are controlled with lightweight, fast bytecode Prolog interpreters. The synergy of these features makes Jinni a convenient development platform for <i>distributed AI</i>, and in particular, for building <i>intelligent autonomous agent</i> applications. The latest version of Jinni is available from <a href="http://code.google.com/p/jinniprolog/">http://code.google.com/p/jinniprolog/</a> owhere you can also find information about new features or related products.</p>
<p class="p7">Jinni supports <i>multi-user</i> synchronized transactions and interoperates with the latest version of <a href="http://www.binnetcorp.com/BinProlog"><span class="s1"><b>BinProlog</b></span></a>, a high performance, multi-threaded <i> </i>Prolog system, well suited for large volume server side operations.  </p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Jinni Features:</b></h2>
<p class="p6">The Jinni<span class="Apple-converted-space">  </span>Prolog compiler integrates a high performance  pure Java based Prolog system featuring multiple logic engines and dynamic databases, with high level networking operations and a GUI development library. Packaged as a 350K Java+Prolog bytecode library, Jinni<span class="Apple-converted-space">  </span>is a self-contained, lightweight, knowledge and interaction processing <i>component</i>, featuring:</p>
<ul class="ul1">
  <li class="li6">Fast WAM based multiple, reentrant Prolog engines, <i>Object Oriented Prolog</i> extensions</li>
  <li class="li6">Synchronized, flexible <i>multi-threaded</i> execution</li>
  <li class="li6">Fully dynamic data areas, heap, symbol table, code area and external object <i>garbage collection</i></li>
  <li class="li6">Extensibility and <i>interoperation with Java</i> through robust Reflection based <i>bi-directional interface</i></li>
  <li class="li6">High level networking through <i>password protected remote predicate call </i>mechanism</li>
  <li class="li6">Distributed <i>blackboard</i> technology providing powerful associative search on structured data</li>
  <li class="li6"><i>Agent coordination language</i>, with ability to express waiting and notification on complex conditions</li>
  <li class="li6">Code and data fetching over the Internet, ability to see <i>URLs</i> as ordinary files</li>
  <li class="li6">Built-in lightweight Web server supporting your Jinni applets and Prolog Server Agents base Web services</li>
  <li class="li6">Compilation to Java, ability to deploy Jinni as a self-contained Applet, Webstart application or .NET executable</li>
  <li class="li6">Byte code compression and encryption ensures compact and secure deployment of large Prolog knowledge bases</li>
  <li class="li6">The Visual Jinni <i>GUI</i> library<span class="Apple-converted-space"> </span></li>
  <li class="li6">Various extensions like the Jinni3D Java3D-based animation and graph layout tool<br>
</li>
</ul>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>Getting started</b></h2>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Installation and essential files</b></h3>
<p class="p6">Make sure you uncompress the provided *.zip or *.tar.gz file containing Jinni . The toplevel interaction starts with something like<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="s3"><b>jinni or jinni.bat or java -jar prolog.jar </b></span>(this loads Jinni's bytecode from compressed<span class="Apple-converted-space">  </span>Java classes)</p>
<p class="p7"><b>or</b></p>
<p class="p10"><b>java -classpath prolog.jar prolog.kernel.Main</b><span class="s4">(on a Java platform)</span></p>
<p class="p9">or</p>
<p class="p10"><b>java -classpath &lt;path&gt; prolog.kernel.Main&lt;path_to _jinni_directory&gt; </b><span class="s4"><b>(on a Java platform)</b></span></p>
<p class="p9">or</p>
<p class="p10"><b>netjinni.exe</b></p>
<p class="p9">or</p>
<p class="p10"><b>netjinni.exe &lt;path_to_jinni_directory&gt;</b><span class="s4"><b> (on a .NET platform)</b></span></p>
<p class="p7">Note that all Jinni files are in fact in the <b>prolog.jar</b> file - once the classes are loaded by Java, <i>Jinni extracts its own bytecode files</i>! To run Jinni from another directory just copy <b>prolog.jar</b> and <b>jc.bat</b> there and type</p>
<p class="p10">jc.bat</p>
<p class="p7">(in the case of JDK 1.2 on windows NT). You might need to <i>adapt</i> this script with other versions of Java or on other platforms. If you prefer, you can use the <b>prolog.bat </b>or<b> njinni.bat</b> (for .NET execution) scripts - once you edit the absolute path information to reflect the directory where you install Jinni.</p>
<p class="p11"><i>Quick info - if you want to try out things right away. Look at the various *.bat files for hints on how to start the various components.</i></p>
<ul class="ul1">
  <li class="li12"><b>jc.bat :</b> start compiler  in command line mode. For multi-user installation modify <b>prolog.bat</b> to reflect OS specifics and Jinni's location information then add it somewhere in your PATH. This will allow running it by typing <b>prolog.bat</b> from any directory. Try <b>appletgo.bat</b> to see a number of Jinni applets locally with your appletviewer. Note that the .NET version netjinni.exe requires access to the  file psrc/wam.bp from where it extracts its compiled Prolog bytcode components.</li>
</ul>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>.NET installation:</b></h3>
<p class="p6">Make sure the <b>.NET framework </b> and the  <b>J# redistributable runtime</b>  have been installed on your computer. The are freely available from the download area at <a href="http://msdn.microsoft.com/visualj/jsharp/beta.asp"><span class="s1">www.microsoft.com</span></a>. From the "prolog" directory type <span class="s3"><b>netjinni.exe</b></span>. At the <span class="s3">?-</span> prompt, type something like <span class="s3"><b>vq8:go</b></span> to see the 8-Queens program running!</p>
<p class="p13"><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Embedded Jinni component installation:</b></h3>
<p class="p6">Simply copy the self-contained <b>prolog.jar</b> file to the required component directory, assuming that the component management software starts Jinni in a way similar to <span class="s3"><b>java -jar prolog.jar</b></span>. This technique is usable for tools like <b>Webstart</b> or for deploying Jinni as a server side knowledge processor.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Running Jinni as an Applet:</b></h3>
<p class="p6">A good way to deploy Jinni as an applet is using something like the following:</p>
<p class="p14"><br></p>
<p class="p15">&lt;APPLET</p>
<p class="p15">  ARCHIVE="prolog.jar"</p>
<p class="p15">  CODE="prolog.kernel.PrologApplet.class"</p>
<p class="p15">  HEIGHT="220"</p>
<p class="p15">  WIDTH="220"<span class="Apple-converted-space"> </span></p>
<p class="p15"> &gt;</p>
<p class="p15">&lt;PARAM<span class="Apple-converted-space"> </span></p>
<p class="p15">   NAME="command"<span class="Apple-converted-space"> </span></p>
<p class="p15">   VALUE="applet_ide"</p>
<p class="p15">&gt;</p>
<p class="p15">&lt;/APPLET&gt;</p>
<p class="p13"><br></p>
<p class="p6">This applet will start by running the <b>command</b> parameter <span class="s3"><b>applet_ide</b></span> as the initial goal.<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Running Jinni Applets from the Web using Jinni's Embedded HTTP Server</b></h3>
<p class="p7">If you do not have a Web server or want to avoid the hassle of configuring one, you can activate Jinni's embedded HTTP server allowing your users to run Jinni applets directly, with something like:<br>
<br>
<span class="s3">?-run_http_server(8001).</span><br>
<br>
or<br>
<br>
<span class="s3">?-bg(run_http_server(8001)).</span><br>
<br>
to run the server as a background Jinni thread. You can also add a remote predicate  with <span class="s3">bg(run_server)</span> to ensure that your  clients can keep persistent state on the server using a variant of the <b>remote_run</b> command.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Exporting local services with Jinni's TCP-IP tunneling</b></h3>
<p class="p7">Jinni supports a simple <b>TCP-IP tunelling</b> <b>API</b> to export services provided by servers behind a firewall (in particular Jinni's own Prolog remote predicate call server, or its HTTP server usable to deploy Jinni applets or server side Prolog agents). The API consists of <b>server</b> and <b>client</b> side <b>tuneling</b> components:</p>
<p class="p7"><b>server_tunnel(ServerPort,LinkServerPort,ServerTunnel):</b> Creates a server side TCP-IP tunnel which maps <b>ServerPort</b> to <b>LinkServerPort</b>. When a client connects to <b>LinkServerPort</b>, it will be able to map all the services of a server it has access to (usually behind a firewall or NAT) as if they were provided on <b>ServerPort</b>. This component is meant to be used on a machine visible on the net to which services behind firewalls can connect and become visible. The returned <b>ServerTunnel</b> can be used to stop the (background) threads created to support the tunnel.</p>
<p class="p7"><b>client_tunnel(LinkHost,LinkPort,LocalServer,LocalPort,ClientTunnel):</b> Creates a client side TCP-IP tunnel which maps <b>LinkHost</b>, <b>LinkPort</b>, to <b>LocalServer</b>, <b>LocalPort</b> where a server (usually behind a firewall or NAT) listens. This client connects to <b>LinkHost</b>, <b>LinkPort</b>, and remaps the services at <b>LocalServer</b>, <b>LocalPort</b> as if they were provided on <b>ServerPort</b> on the <b>LinkHost</b> machine. This component is meant to be used on a machine invisible on the net (behind firewalls or NAT). The returned ServerTunnel can be used to stop the (background) threads created to support the tunnel.</p>
<p class="p7"><b>stop_tunnel(Tunnel):</b> Stops the threads supporting a server or client side tunnel.</p>
<p class="p7">For instance, you can start on your real "server" machine with fixed IP address and domain name ( let's say: <b>server.example.com</b>) with something like:<br>
<br>
<span class="s3">prolog.bat<br>
?-server_tunnel(5555,4444,R).<br>
?-server_tunnel(8888,7777,R).</span><br>
<br>
Let's assume that on the client machine (let's say "<b>localhost</b>"), you run an Apache server on port 80 and a Jinni Web server on port 81, which you have started in its own window with:<br>
<br>
<span class="s3">prolog.bat<br>
?-run_http_server(81).</span><br>
<br>
Then if you run on the client machine (localhost) in a separate window, something like<br>
<br>
<span class="s3">?-client_tunnel('server.example.com',4444,localhost,80,R).<br>
?-client_tunnel('server.example.com',7777,localhost,81,R).</span><br>
<br>
you will be able to tunnel the services form localhost to <b>server.example.com</b> (visible on the net) where you will see the<br>
tunnelled Apache server as:<br>
<br>
<span class="s3">http://server.example.com:8888/</span><br>
<br>
and the tunelled Jinni server as:<br>
<br>
<span class="s3">http://server.example.com:5555/</span><br>
</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>iPAQ Pocket PC installation:</b></h3>
<p class="p6">Make sure the <b>JEODE</b> <b>Java</b> plugin is installed to your iPAQ from the iPAQ distribution CD or by obtaining it from <a href="http://www.insignia.com/"><span class="s1">www.insignia.com</span></a>. Then, simply copy with ActiveSync the directory <b>pocketProlog</b> to the <b>iPAQ FileStore. </b>Navigate with the iPAQ File Explorer to the <b>pocketProlog</b>directory, in which you can find and click on the <b>pprolog</b> script. Type something like  <span class="s3">vq8:go</span> to see the 8-Queens program running! To change this default installation edit the <b>pprolog.lnk</b> file on the host to which the iPAQ connects to reflect a different location.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Key Jinni<span class="Apple-converted-space">  </span>components - (section relevant ONLY for owners of<i> Jinni Full Source license</i>)</b></h3>
<p class="p6">The core of Jinni<span class="Apple-converted-space">  </span>is in the Java classes inside the subdirectory <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/prolog.kernel"><span class="s1"><b>prolog.kernel</b></span></a>. Look at the Jinni<span class="Apple-converted-space">  </span><a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/doc/index-all.html"><span class="s1">class documentation</span></a> in directory <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/doc"><span class="s1">doc</span></a>. The most important Prolog files, allowing you to configure/fix problems with Jinni<span class="Apple-converted-space">  </span>are in directory <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/psrc"><span class="s1">psrc</span></a> - containing the definition of most built-ins implemented in Prolog. If you have the Jinni<span class="Apple-converted-space">  </span>sources, the essential files to look at are <i>Main.java</i>, <i>Top.java</i>,<i>Machine.java</i> in directory prolog.kernel and the <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/psrc/refl.pl"><span class="s1">psrc/refl.pl</span></a> showing how to extend Jinni<span class="Apple-converted-space">  </span>with new Java operations using Java's Reflection abilities. It also contains multi-threading and networking code as well as (minimal) Personal Java compliant Jinni GUI toolkit - which can run happily from virtually any browser and even on Java enabled PocketPC PDA's like Compaq's <b>iPAQ</b>.<span class="Apple-converted-space"> </span></p>
<p class="p6"> </p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Extending Jinni</b></h3>
<p class="p6"><b>A new,</b><i> </i><b><i>reflection </i>based extension mechanism has been added to Jinni. In fact it is now used to provide some key internal components of Jinni itself, like multi-threading and networking.</b></p>
<p class="p7"><b>Third party Jinni extensions are collected in a separate directory tree <i>xjinni2k (obtained by expanding xj2k.zip). </i>A quick way to add your own extensions is to clone one of them and adapt the builtins and related Prolog script files.</b></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Using Jinni<span class="Apple-converted-space">  </span>in command line mode:</b></h3>
<p class="p6"><b>Entering a query:</b></p>
<p class="p7">At the prompt "?-" type in a one line Prolog query, as usual, for instance, something like:</p>
<p class="p7"><b><i>?- write(hello),nl.</i></b></p>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>Compiling a new program:</b></h4>
<p class="p6"><b><i>?-[&lt;myprog&gt;].</i></b></p>
<p class="p7"><i>will read in memory the file </i><b><i>&lt;myprog&gt;.pro</i></b><i> program </i>replacing<i> similarly named predicates with new ones.</i></p>
<p class="p7"><i>If you start Jinni<span class="Apple-converted-space">  </span>with its visual environment, try something like:</i></p>
<p class="p7"><b><i>?-ide.</i></b></p>
<p class="p7"><i>to launch an instance of the IDE, or</i></p>
<p class="p7"><b><i>?- vq8:go.</i></b></p>
<p class="p7"><i>to run a visual N-Queens program and</i></p>
<p class="p7"><b><i>?- vtetris:go.</i></b></p>
<p class="p7">to run a Visual Tetris Agent demo. Note that the &lt;module&gt;:&lt;predicate&gt; notation allows running multiple Prolog applications in different code spaces.</p>
<p class="p7">If you have Prolog files in multiple directories you can also add them to the end of Jinni's search path with:</p>
<p class="p7"><b><i>?- add_to_path('&lt;mydirectory&gt;').</i></b></p>
<p class="p7">On the other hand,</p>
<p class="p7"><b><i>?-path_element(Directory).</i></b></p>
<p class="p7">will return one by one the directories in the current path. You can add to the top of your search path wit<i>h:</i></p>
<p class="p7"><b><i>?- push_to_path('&lt;mydirectory&gt;').</i></b></p>
<p class="p7"><i>and delete from it with</i></p>
<p class="p7"><b><i>?- del_from_path('&lt;mydirectory&gt;').</i></b></p>
<p class="p7"><i>All subsequent references to </i><b><i>compile</i></b><i>, </i><b><i>consult</i></b><i> and </i><b>&lt;module&gt;:&lt;predicate&gt;</b> <i> will take into account the current path.</i></p>
<p class="p7">Note that by default Jinni's toplevel is non-interactive - i.e. it prints all solutions to a query containing variables. You can change this by typing:</p>
<p class="p7"><b><i>?- interactive(yes).</i></b></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Using Jinni<span class="Apple-converted-space">  </span>through an applet</b></h3>
<p class="p6">Type <b>appletviewer DemoGUIApplet.htm</b>l . Enter, for instance, in the query window:</p>
<p class="p7"><b>append(Xs,Ys,[1,2,3]).</b></p>
<p class="p7">You will see the applet displaying the results. Applets can load files <i>located at the site where they originate from</i>. Try</p>
<p class="p7"><b>?-vq8:go(12).</b></p>
<p class="p7">to compile over the net and run the N-queens program with 12 queens. <i>To launch an instance of a simple IDE with embedded editor and query processor, type</i></p>
<p class="p7"><b><i>?-ide.</i></b> <br>
 </p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Building simple Prolog programs with Jinni<span class="Apple-converted-space"> </span></b></h3>
<p class="p6">With the editor of your choice create a text file called simple.pro, with the following content:</p>
<p class="p10">c(X):-a(X),b(X).</p>
<p class="p10">a(1).<span class="s5"> <br>
</span>a(2).<span class="s5"> <br>
</span>a(3).</p>
<p class="p10">b(2).<span class="s5"> <br>
</span>b(3):- !.<span class="s5"> <br>
</span>b(4).</p>
<p class="p7">In a shell window (DOS command, csh, bash etc.), type <b>jc.bat</b> to launch the standalone command line Jinni toplevel, prompting you with "<b>?- </b>" to enter commands/queries. To load the file type:</p>
<p class="p10"><span class="s5">?-</span>[simple].</p>
<p class="p7">then try the query:</p>
<p class="p10"><span class="s5">?-</span>c(X).</p>
<p class="p7"><b>Example of reading/writing to files:</b></p>
<p class="p7">Jinni<span class="Apple-converted-space">  </span>can read files or URLs (as well as subcomponents of compressed ZIP or JAR files or URL) and write files in command line mode. In applet mode Jinni<span class="Apple-converted-space">  </span>can only read files described as URLs, from from the directory it comes from. Try:</p>
<p class="p10"><span class="s5">?-</span>tell('example.txt'),write(example(one)),write('.'),nl,told.</p>
<p class="p7">followed by:</p>
<p class="p10"><span class="s5">?-</span>see('example.txt'),read(X),seen,write(X),nl.</p>
<p class="p7">Jinni can open a URL over the net, in a way similar to file. Try:</p>
<p class="p10">?-see('http://yahoo.com'),get0(X),get0(Y),seen,put(X),put(Y).</p>
<p class="p7">to print out a HTML file fetched directly from the Web.</p>
<p class="p10">?-token_of('http://yahoo.com',Token),println(Token),fail.</p>
<p class="p7">will get a token at a time from a Web page and print it out. With this, writing your own Web data extractor in Jinni is only a few lines away! <br>
 </p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Creating Standalone Jinni<span class="Apple-converted-space">  </span>Applications</b></h1>
<p class="p7">Jinni's binary Prolog code is stored in <b>wam.bp</b> (as well as in prolog.jar in encrypted and compressed form, to allow running even in the absence of the <b>wam.bp</b> file). The end  of this file also contains directives instructing the loader to link the code in the Jinni's internal code area. The <b>ucompile/3</b> operation merely concatenates newly generated bytecode files with the current basic bytecode file and as such allows creating standalone compiled applications. Here is the main command:<br>
<br>
<span class="s6">ucompile(InFiles,BasicFile,OutFile)</span><br>
<br>
For instance, if  your application containing only the file hello.pl  is located  in directory bin, you can type:<br>
<br>
?<span class="s3">-ucompile(['hello.pl'], 'wam.bp', 'hello.bp').</span><br>
<br>
After compilation, to run Prolog code from the resulting bytecode file (now containing both Jinni's kernel and you application's bytecode)  you will need to pass the name of the new bytecode file as a parameter to Jinni as in:<br>
<br>
<span class="s3">java -cp ".;prolog.zip" prolog.kernel.Main hello.bp</span></p>
<p class="p7">or by using a script like <b>urun.bat</b><span class="s3">:</span></p>
<p class="p7"><span class="s3">urun.bat hello<br>
  </span><br>
Please make sure you backup you <b>wam.bp</b> file before experimenting with this command.</p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Saving and restoring Jinni's state using Java serialization</b></h1>
<p class="p6">All Jinni classes are serializable - you can save Jinni's state (code compiled to memory + dynamic database) with the command. <b>serialize(myFile)</b> which creates<b> myFile.jc</b> in the current directory and then resume from the saved state file by passing <b>&lt;MyFile&gt;.jc</b> as a command line parameter to Jinni like in: <b>java -cp prolog.jar prolog.kernel.Main myFile.jc.</b> Such code is loaded significantly faster than by calling the compiler.</p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Classes, Instances and Inheritance in Jinni's Object Oriented Prolog</b></h1>
<p class="p6"><b>Jinni<span class="Apple-converted-space">  </span>features a simple, elegant and fast Object Oriented Prolog layer - built as a natural extension to ISO Prolog. Classes are just Prolog files with include declarations - almost no changes  are required to reorganize your existing Prolog code in an Object Oriented style. As the dispatching of method calls is handled at compile time and instances are lightweight, Jinni 's Prolog Objects are extremely efficient. Prolog class files can be located at arbitrary URLs on the Web - you can inherit and override from a virtually unlimited library of existing Prolog files. And what if cycles will form? Not a problem! Jinni<span class="Apple-converted-space">  </span>supports multiple cyclic inheritance for building in a scalable way, an arbitrary network of Web or file based interdependent Prolog classes!</b></p>
<p class="p7">A <b>class</b> <span class="s3"><i>foo</i></span> is associated to each Prolog <b>file (or URL) </b>let's say<span class="s3"> <i>foo</i>.pl.</span> In a way similar with compiling a Prolog file in a conventional way with ?-<span class="s7">compile(<i>foo)</i></span>, the user can enter a default <b>instance</b> of the class foo with</p>
<p class="p10"><span class="s5">?-</span>enter_class(foo).</p>
<p class="p9">or call code in it (like in the presence of a conventional module system) from outside with</p>
<p class="p10">?-foo:&lt;predicate&gt;.</p>
<p class="p9">If <b>foo.pl</b> contains <span class="s8"><b>:-[&lt;superclassfile&gt;] </b></span><b>declarations, </b>let's say something like <span class="s3">:-[<b>bar]</b></span><b>, </b>definitions not found in <span class="s3"><i>foo</i></span> will be searched in <span class="s3"><i>bar. </i></span>As files and URLs are treated in similar ways, inheritance directives like<span class="s8"><b>:-['http://www.my_url.com']</b></span>can refer to non-local URLs as well.</p>
<p class="p9">ISO Prolog's <span class="s3"><b>:-initialization((&lt;Goal&gt;))</b></span> declarations are processed (in reverse order) after collecting them from included files - as a mechanism of class level initialization, shared among all instances. Code added with <b>assert/1</b> in such <span class="s3"><b>initialization/1</b></span><b> calls</b><span class="s3"><b> </b></span>will be visible in all instances.</p>
<p class="p9">Code inheritance is handled at <b>compile time</b> - through a special <span class="s3">ocompile/1</span> command  which reinterprets include directives like <span class="s3">:-[&lt;file&gt;]</span> as inheritance from other Prolog files/classes. Classes are compiled on the fly, at the first use of a class or creation of a new instance.</p>
<p class="p9">The <b>multiple cyclical depth first inheritance</b> mechanism is implemented by keeping the path consisting of the list of visited includes, when (at compile time) predicates not defined locally, are brought from files or URLs. In the presence of multiple includes, a "depth-first" order for finding definitions ensures that a dominant main inheritance tree prevails in case of ambiguity. This concept of cyclical inheritance allows reuse of  Prolog code located virtually everywhere on the Web from a local perspective.</p>
<p class="p7"><span class="s4"><b>Constructors</b> are simply predicates of various arities having the <i>same name as the file</i> (or URL). <b>Constructors (of any arity) are inherited</b>, if not provided. They <b>can freely call constructors defined in their super classes using their predicate names</b>, same as the ones of the superclasses' names.</span> The recommended style is to have lower arity constructors call higher arity ones with some constant default parameters. <i>No special action is provided (and this is different from Java!)</i> for <b>no-arg constructors</b> of supers, except that they are inherited like any other constructors. It is a good programming practice to share some common initialization code among constructors - like for instance initialzing fields, or use ISO Prolog  <b>:-initialization(Goal)</b> directives to initialize fields.This style ensures that fields defined locally or in the main inheritance chain will prevail. <i>Programmers should  initialize fields in constructors or initialization directives, as attempts to access unitialized fields trigger runtime exceptions (rather that simply failing).</i></p>
<p class="p9"><b>Instance Fields</b> are local to each instance. A set operation<span class="s3"> &lt;field name&gt;  <b>&lt;=</b> &lt;value&gt;</span>  and a get operation <span class="s3">&lt;field name&gt; <b> </b>=&gt; &lt;Prolog variable&gt;</span> are provided, like in:</p>
<p class="p10">    radius &lt;= 99<span class="s5"> <br>
</span>    radius =&gt; R.</p>
<p class="p7"><b>Reference to uninitialized fields results in a runtime exception.</b></p>
<p class="p9"><span class="s3"><b>Assert/1 </b></span>and other database operations are <b>local to instances</b> - but the results of class level <span class="s3"><b>asserts</b></span> are visible in instances - until overridden by a local assert with the same predicate name and arity.</p>
<p class="p9">To keep the object model simple, we have not implemented <b>public, private or final</b> modifiers. This can be provided in the future if requested by users. Other, more precise access and security control mechanisms will be added in the future in the context of distributed objects and agent programming constructs.</p>
<p class="p7"><b>Instances</b> are created from Constructors (same as <b>class names</b> if havin no arguments, and having the main functor the same as the class name if having arguments) with the new/2 and renew/2 commands:</p>
<p class="p7"><b>new(Constructor,Instance)</b>  - which automatically loads te code when the first instance is created and reuses it otherwise</p>
<p class="p7">and</p>
<p class="p7"><b>renew(Constructor,Instance)</b>  - which forces refreshing the code for the class, before creating the instance</p>
<p class="p7">In the process, an internal Class handle is created and if neaded the code for the class is compiled on the fly and attached to it.</p>
<p class="p7">You can interact with <b>Instances</b> of <b>Prolog Classes </b>in two ways, as shown in the following examples (see files like <b>queue.pl</b>,<b>stack.pl</b> in <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/classlib/queue.pl"><span class="s1">classlib</span></a> for more details).</p>
<p class="p10"><span class="s5">?-</span>enter_instance(queue).<span class="s5"> <br>
</span>?-add(a).<span class="s5"> <br>
</span>?-add(b).<span class="s5"> <br>
</span>?-remove(X).<span class="s5"> <br>
</span>?-show.<span class="s5"> <br>
</span>?-exit.<span class="s5"> <br>
</span>?-</p>
<p class="p9">or call code in it from outside as in:</p>
<p class="p10">?-new(queue,Q),Q:add(a),Q:add(b),Q:remove(X),Q:show.</p>
<p class="p9">Here is a simple example of 2 Prolog classes circle.pl inheriting from shape.pl.<span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p19"><br></p>
<p class="p13"><br></p>
<p class="p20">% file shape.pl</p>
<p class="p10">shape:-<span class="s5"> <br>
</span>  centerX&lt;=0,<span class="s5"> <br>
</span>  centerY&lt;=0.</p>
<p class="p10">show:-<span class="s5"> <br>
</span>  centerX=&gt;X,<span class="s5"> <br>
</span>  centerY=&gt;Y,<span class="s5"> <br>
</span>  println('I am a shape at'(X,Y)).</p>
<p class="p10">move_to(X,Y):-<span class="s5"> <br>
</span>  centerX&lt;=X,<span class="s5"> <br>
</span>  centerY&lt;=Y.<span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p19"><br></p>
<p class="p13"><br></p>
<p class="p20">% file circle.pl</p>
<p class="p10">:-[shape].</p>
<p class="p10">circle :- radius&lt;=1.</p>
<p class="p10">circle(X,Y,R):-<span class="s5"> <br>
</span>  centerX&lt;=X,<span class="s5"> <br>
</span>  centerY&lt;=Y,<span class="s5"> <br>
</span>  radius&lt;=R.</p>
<p class="p10">show:-<span class="s5"> <br>
</span>  centerX=&gt;X,<span class="s5"> <br>
</span>  centerY=&gt;Y,<span class="s5"> <br>
</span>  radius=&gt;R,<span class="s5"> <br>
</span>  println('I am a circle at'(X,Y,R)).<span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p19"><br></p>
<p class="p13"><br></p>
<p class="p21">A query like:</p>
<p class="p10">?- new(circle(1,1,5),Circle),Circle:show,Circle:(move_to(2,2),show).</p>
<p class="p9">will produce:</p>
<p class="p10">'I am a circle at'(1,1,5)<span class="s5"> <br>
</span>'I am a circle at'(2,2,5)</p>
<p class="p9">as expected, by overrding show/0 and inheriting move_to/2.</p>
<p class="p9"><b>Class Fields</b> are shared among instances. In fact, they are just instance fields belonging to instace 0 - which keeps the state of the class itself. A class field <b>set</b> operation<span class="s3"> &lt;field name&gt;  <b>&lt;==</b> &lt;value&gt;</span>  and a class field <b>get</b> operation <span class="s3">&lt;field name&gt; <b> =</b>=&gt; &lt;Prolog variable&gt;</span>  are used as in:</p>
<p class="p10">    instance_count &lt;== 10<span class="s5"> <br>
</span>    instance_count ==&gt; R.</p>
<p class="p9">When performed from instances of<b> a given class</b>, these operations are applied<b> to the fields of the class, not the instance. </b>Like static variables in Java, they refer to data shared among all instances of a class.<span class="s5"> <b>Reference to uninitialized fields results in a runtime exception</b>. <br>
 </span></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times; color: #330033"><b>Backtrackable Field Assignments</b></h1>
<p class="p21"><b>Undoables </b>are special fields local to each Prolog <b>Engine</b> providing backtrackable destructive assignment. A <b>set</b> operation<span class="s3"> &lt;field name&gt; <b>&lt;=#</b> &lt;value&gt;</span>  and a <b>get</b> operation <span class="s3">&lt;field name&gt; <b> #</b>=&gt; &lt;Prolog variable&gt;</span> are provided, like in:</p>
<p class="p10">    ?-maybe &lt;=# blue, maybe #=&gt; Color.</p>
<p class="p7">returning Color=blue.</p>
<p class="p9">Assignement to <b>undoables</b> is backtrackable - this means that something like:</p>
<p class="p10"><span class="s4">  </span>  ?-maybe &lt;=# blue, fail ; maybe #=&gt; Color.</p>
<p class="p7">will fail, without provinding a value to Color. Contrast this with conventional field assignment which survives backtracking, which means that:</p>
<p class="p10">?-maybe &lt;= blue, fail ; maybe =&gt; Color.</p>
<p class="p7">will return <span class="s3">Color=blue</span>. Their implementation uses the public interface <b>prolog.kernel.Undoable</b> which can provide action on baktracking services to a user's Java objects. Java objects implementing this interface should provide two methods: <b>undo() </b>which will be called each time backtracking moves to the next clause of a given choicepoint and and <b>done()</b> which is called when the current choicepoint is popped off the stack. A user can register such objects (created using Jinni's Reflection based interface) with something like <b>add_undoable(&lt;MyUndoableObject&gt;)</b>. Assumming this happens in the first clause of a predicate, for each subsequent failure, the object's <b>undo()</b> method will be called. The object's <b>done()</b> method will be called only once, after all clauses of the predicate have been explored. <br>
 </p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Assumption Grammars and DCGs</b></h1>
<p class="p6">Jinni supports BinProlog-style assumption grammars as an extension to traditional Prolog DCGs. The main difference with BinProlog is tha the Assumption Grammar API works only <i>inside</i> DCG rules (clauses created using <b>--&gt;/2</b> instead of <b>:-/2</b> ) and their scope always extends over the "current AND-continuation" - i.e. while the current computation is succeeding.  The API consists in a set of <i>backtrackable</i> operations, which enhance DCG rules by providing a temporary database where information aquired during the parsing process can be added, updated and queried. The API distingushes between "linear assumptions" usable at most once once - which bind variables, and "intuitionistic" assumptions - which can be matched by queries indefinitely (unless removed on backtracking). Assumption Grammar operations provide, together with the use of overriding of DCG rules by organizing them in Prolog classes, a powerful Object Oriented Logic Grammar mechanism.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Assumption Grammar API (operations only usable <i>inside</i> DCG rules):</b></h3>
<p class="p20">'#&lt;'(Xs): sets the DCG token list to be Xs</p>
<p class="p10">'#&gt;'(Xs): unifies current DCG token list with Xs</p>
<p class="p10">#X: matches X against current DCG token</p>
<p class="p10">'#+'(X): adds 'linear' assumption +(X) to be consumed at most once, by a '#-' operation</p>
<p class="p10">'#*'(X): adds 'intuitionisic' assumption *(X) to be used indefinitely by '#-' operation</p>
<p class="p10">'#='(X): unifies X with any matching existing or future +(X) linear assumptions</p>
<p class="p10">'#-'(X): consumes +(X) linear assumption or matches *(X) intuitionistic assumption</p>
<p class="p10">'#?'(X):  matches +(X) or *(X) assumptions without any binding</p>
<p class="p7">The file <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/progs/ag_parser.pl"><span class="s1">progs/ag_parser.pl </span></a> shows a Prolog complete parser and tokenizer written using Jinni's Assumption Grammars. Among the advanced features implemented: regular expression processing and use of assumptions to create unique variables from variable tokens with identical names.</p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Multiple Databases in Jinni</b></h1>
<p class="p21"> Jinni<span class="Apple-converted-space">  </span>supports multiple databases directly - in conventional Prolog style - i.e. something like<span class="Apple-converted-space"> </span></p>
<p class="p14"><br></p>
<p class="p20">?-Db=test_db, db_assert(Db,a(1)), db_clause(Db,a(X),B)<span class="s4"> .</span></p>
<p class="p23"><br></p>
<p class="p21">which will assert <span class="s3">a(1)</span> in database <span class="s3">Db </span><span class="s5">and then bind</span><span class="s3"> X=1 </span><span class="s5">and</span><span class="s3"> B=true</span>.<span class="Apple-converted-space"> </span></p>
<p class="p23"><br></p>
<p class="p21">Jinni<span class="Apple-converted-space">  </span>also provides fast loading and saving of password protected  databases with:</p>
<p class="p23"><br></p>
<p class="p20">?-db_xsave(Db,File,Pasword).</p>
<p class="p23"><br></p>
<p class="p21">which saves a protected databased named Db to a file, and</p>
<p class="p23"><br></p>
<p class="p20">?-db_xload(File,Db,Pwd).</p>
<p class="p23"><br></p>
<p class="p21">which loads from a file or url URL a protected database named Db.</p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Multiple Engines, Answer Generation and Control</b></h1>
<p class="p21">Independently of its multi-threading mechanism, Jinni<span class="Apple-converted-space">  </span>provides first order <i>engines </i>- separate instances of its dynamically growing/shrinking runtime system (heap,stack,trail) which can be controlled through the following API:</p>
<ul class="ul1">
  <li class="li21"><b>new_engine(Instance,AnswerPattern,Goal,EngineHandle)</b>: creates and returns a new engine based on code and dynamic database state associated with a Prolog class instance</li>
  <li class="li21"><b>get(EngineHandle,Answer)</b>: asks an engine  for a new Answer, which will be of the  form <b>the(AnswerPatternInstance)</b> on success and which will be <b>no</b> on failure as well on any call after failure occurred</li>
  <li class="li21"><b>stop(EngineHandle):</b>  makes sure the engine is stopped. Only <b>no </b>answers will be available from the engine in the future.</li>
  <li class="li21"><b>return(Answer):</b> initiated by the engine - which acts such that the next <b>get/2</b> of the parent will obtain a copy of<b> Answer</b>. Note that engines are fully reentrant - in particular, the parent can force the engine to resume its work with another <b>get/2 </b>request - in which case the engine performs as if the <b>return/1</b> statement were not in effect.</li>
</ul>
<p class="p21"><b>Example</b>:</p>
<p class="p10"><b>?- new_engine(X,(member(X,[1,2]),(X=1,return(good(X));X&gt;1)),E),get(E,A),get(E,B),get(E,C),get(E,D).</b></p>
<p class="p10"><b>A = the(good(1)) B = the(1) C = the(2)  D = no E = 1331 X = _120 ;</b></p>
<p class="p7">This kind of functionality seems the simplest way to implement some agent-style  control mechanism on top of Prolog - it provides a minimal set of language constructs for the  kind of control users want to have interactively over Prolog's answer production.</p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Threads and Hubs</b></h1>
<p class="p6">Jinni<span class="Apple-converted-space">  </span>supports a simple multi-threading model, given by the following API:</p>
<ul class="ul1">
  <li class="li6"><b>bg(Goal,ThreadHandle):</b> launches a new thread executing Goal and returns a ThreadHandle to it</li>
  <li class="li6"><b>hub_ms(Timeout,HubHandle):</b> constructs a new Hub returned as a HubHandle - a synchronization device on which N consumer threads can wait with <b>collect(HubHandle,Data)</b> for data produced by M producers providing data with <b>put(HubHandle,Data). </b>However, if a given consumer waits more than <b>Timeout</b> miliseconds it returns and signals failure. As usual in Java, 0 timout means indefinite suspension.</li>
  <li class="li6"><b>current_thread(ThreadHandle): </b>returns a handle to the current thread - might be passed to another thread wanting to join this one.</li>
  <li class="li6"><b>join_thread(ThreadHandle):</b> waits until a given thread terminates.</li>
  <li class="li6"><b>sleep_ms(Timeout): </b>suspends for Timeout milliseconds, while consuming minimal (practically no) CPU power</li>
</ul>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Thread Coordination with Blackboards</b></h1>
<p class="p6">Blackboards are global (one per Jinni process) databases which provide thread coordination through the following (extended Linda) operations:</p>
<ul class="ul1">
  <li class="li6"><b>in(Pattern):</b> waits for data on the blackboard which matches (through unification) Pattern</li>
  <li class="li6"><b>out(Pattern):</b> puts for data on the blackboard and possibly resumes a thread waiting with <b>in/1</b> if Pattern matches</li>
  <li class="li6"><b>all(Pattern,Matches)</b>: returns a list of terms on the blackboard ready to match Pattern or an empty list if none matches. Such data has been put on the blackboard using <b>out/1</b> operations.</li>
  <li class="li6"><b>wait_for(Term,Constraint)</b> <b>:</b>waits for a term on the blackboard, such that Constraint holds</li>
  <li class="li6"><b>notify_about(Term)</b> <b>: </b>notifies a suspended matching <b>wait_for(Term,Contraint)</b>, if Constraint holds, that Term is available</li>
</ul>
<p class="p6">Blackboard operations can be combined with <b>remote_run</b> remote predicate calls to allow interaction between threads distributed in different processes on the same or on different computers on the net. Threads can be launched locally or remotely with <b>bg</b> operations.</p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Client-Server Programming with Remote Predicate Calls</b></h1>
<p class="p6">Jinni<span class="Apple-converted-space">  </span>supports a simple client-server Remote Predicate Call mechanism given by the following API:</p>
<ul class="ul1">
  <li class="li6"><b>run_server(Port,Password)</b>: runs a server on a given Port and with given Password (to be matched by connecting client queries)</li>
  <li class="li6"><b>run_server(Port)</b>: runs a default server on given Port</li>
  <li class="li6"><b>run_server</b>: runs server on default port</li>
  <li class="li6"><b>remote_run(Query):</b> asks the default server to run Query and bind variables with returned result</li>
  <li class="li6"><b>remote_run(Host,Port,Answer,Goal,Passwd,Result): </b>asks a server waiting on Host, Port to execute Goal and return a Result of the form <b>the(AnswerInstance)</b> if the query succeds or <b>no</b> if it fails. The returned Term answer instance contains a copy of Answer with bindings resulting of the execution of Goal. Note that an implicit <b>once/1</b> operation is used on Goal as only the first solution is returned.</li>
</ul>
<p class="p6">A slightly more efficient client-server API that reuses sockets consists of the following:</p>
<ul class="ul1">
  <li class="li6"><b>rpc_server(Port,Password): </b>runs a socket reusing server on a given Port, with given Password</li>
  <li class="li6"><b>start_rpc(Host,Port,Password),rpc(G1,rpc(G2)...,rpc(Gn),stop_rpc: </b>sends <b>G1,G,...Gn</b> goals to be run on <b>Host,Port</b> provided that <b>Password </b>matches the server's password</li>
</ul>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Networking with Object Oriented Prolog Classes</b></h1>
<p class="p7"><br>
As part of the growing library of Object Oriented Prolog components (see directory<a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/classlib"><span class="s1"> classlib</span></a>), Jinni provides a <b>server</b> and a <b>client</b> class which will be used as inheritance roots for various components (secure client and server, agents etc.). Note that a password (<i>tweety</i> in this example) is needed for the server to accept a client's requests.</p>
<p class="p7">The constructor <b>server(Port,Password)</b> creates a server instance listening on a port and only executing queries of clients providing a matching password.</p>
<p class="p7">The constructor <b>client(Host,Port)</b> creates a client which will try to connect to a server on Host, Port. The resulting client is ready to send queries with <b>ask(Goal). </b> While a client performing a <b>remote_run</b> operation opens and closes the socket automatically, instances of this client will keep the socket open until the progammer uses a <b>disconnect </b>operation. All calls on a given socket run on the same thread on the server. This added flexibility requires less system resources and avoids TCP_WAIT related errors on operating systems slow in freeing the ports of closed sockets.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Server Window:</b></h3>
<p class="p20">?- new(server(8888,tweety),S),S:serve.<span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p20">hello</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Client Window</b></h3>
<p class="p20">?- new(client(localhost,8888,tweety),C),C:ask(println(hello)),C:disconnect.<span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"> </p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Secure Communications Using Cryptography and Sealed Objects</b></h1>
<p class="p6">When running under JDK 1.4 or later, which integrates a cryptography package Jinni provides secure communication classes. Note that from a user's perspective security is completely transparent, as shown in the following example:</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Server Window:</b></h3>
<p class="p20">?- new(secure_server(8888,tweety),S),S:serve.<span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p20">hello</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Client Window</b></h3>
<p class="p20">?- new(secure_client(localhost,8888,tweety),C),C:ask(println(hello)),C:disconnect.</p>
<p class="p9">Internally, Jinni makes use of serialized  Prolog terms which are encrypted as Sealed Objects before being sent over a socket.<span class="s5"> <br>
 <span class="Apple-converted-space"> </span></span></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Sharing a Jinni Shell Server through Remote Jinni Shell Clients</b></h1>
<p class="p6">Jinni<span class="Apple-converted-space">  </span>provides full redirection of I/O from a Jinni application working as a  shell <b>server</b> to one or more others working as shell clients. This allows seeing/debugging/running a program by multiple users (for instance a teacher and a group of students).</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Server Window:</b></h3>
<p class="p20">?- shell_server.</p>
<p class="p20">Server started on port: 6001</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Client Window</b></h3>
<p class="p20">?- ?- shell_client.</p>
<p class="p20">?- assert(a(99)).</p>
<p class="p20">yes</p>
<p class="p14"><br></p>
<p class="p20">?- a(X).</p>
<p class="p20">X = 99</p>
<p class="p20">;</p>
<p class="p20">no</p>
<p class="p7">Note that asserted facts will become visible to all clients.</p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Calling Java from Jinni by using Reflection</b></h1>
<p class="p6">The Reflection based API connecting compiled Prolog code directly to arbitrary Java classes, objects, methods, fields is very simple but very powerful. Data-types are converted automatically to their most natural equivalents (Java Strings to/from Prolog constants, Java integers and doubles to their Prolog numerical equivlalents etc.). If a given method's parameter signature triggers a Java exception, the interface attempts exhaustive method search and data conversions to invoke what the programmer "means".</p>
<ul class="ul1">
  <li class="li6"><b>new_java_class(Name,Cls): </b>given a<b> Name </b>(Prolog constant), returns a handle to a Java class <b>Cls</b></li>
  <li class="li6"><b>new_java_object(Cls,Args,Obj): </b>returns <b>Obj</b>, an instance of class <b>Cls</b> by calling a constructor with <b>Args</b>. If <b>Args</b>=<b>none</b>, a constructor with no arguments is called, if <b>Args=args(A1,A2,...An)</b> then a matching constructor with arguments <b>A1,A2...An</b> is called, after appropriate conversions</li>
  <li class="li6"><b>invoke_java_method(Class,Obj,MethName,Args,Answer): </b>Invokes on <b>Obj </b>a method named <b>MethName </b>defined in<b> Class </b>with <b>Args</b> and unifies <b>Answer</b> with the value returned by the method (which can be one the special constant '<b>$null')</b>. If <b>Args=args(A1,A2,...An)</b> then a matching method with arguments <b>A1,A2...An</b> is called, after appropriate conversions. If the Class parameter is absent, it will be guessed using <b>Obj</b>'s getClass() method.</li>
  <li class="li6"><b>get_java_field_handle(Obj,FieldName,FieldHandle): </b>Given an object <b>Obj </b>and a <b>FieldName </b>it returns a <b>FieldHandle</b>(a handleto a<b> java.lang.reflect.Field</b> object) on which various <b>get</b> and <b>set</b> methods can then be invoked</li>
  <li class="li6"><b>delete_java_class(Cls,YesNo): </b>deletes <b>Cls</b> from the persistent object handle table. <b>YesNo=true </b>indicates success. <b>YesNo=fail</b> indicates failure of the delete operation</li>
  <li class="li6"><b>delete_java_object(Obj,YesNo): </b>deletes <b>Obj</b> from the persistent object handle table. <b>YesNo=fail</b> indicates failure of the delete operation.</li>
</ul>
<p class="p7"><br>
A more convenient Prolog layer provides an extended REFLECTION API - which also shows how the main builtins are used.</p>
<p class="p10">/*<span class="s5"> <br>
</span>  add new object using convenient &lt;className&gt;(A1,...An) syntax<span class="s5"> <br>
</span>*/<span class="s5"> <br>
</span>new_java_object(ClassName,Object):-<span class="s5"> <br>
</span>  atom(ClassName),!,<span class="s5"> <br>
</span>  new_java_class(ClassName,Class),<span class="s5"> <br>
</span>  new_java_object(Class,void,Object).<span class="s5"> <br>
</span>new_java_object(ClassAndArgs,Object):-<span class="s5"> <br>
</span>  functor(ClassAndArgs,ClassName,_),<span class="s5"> <br>
</span>  new_java_class(ClassName,Class),<span class="s5"> <br>
</span>  new_java_object(Class,ClassAndArgs,Object).</p>
<p class="p10">/*<span class="s5"> <br>
</span>   invoke static or dynamic Java method using<span class="s5"> <br>
</span>   more natural &lt;methodName&gt;(A1,...An) syntax<span class="s5"> <br>
</span>*/<span class="s5"> <br>
</span>invoke_java_method(ObjectOrClass,MethodName,Result):-<span class="s5"> <br>
</span>  atom(MethodName),!,<span class="s5"> <br>
</span>  invoke_java_method(ObjectOrClass,MethodName,void,Result).<span class="s5"> <br>
</span>invoke_java_method(ObjectOrClass,MethodAndArgs,Result):-<span class="s5"> <br>
</span>  functor(MethodAndArgs,MethodName,_),<span class="s5"> <br>
</span>  invoke_java_method(ObjectOrClass,MethodName,MethodAndArgs,Result).</p>
<p class="p10">/*<span class="s5"> <br>
</span>  Get the content of a (public) Java field<span class="s5"> <br>
</span>  after obtaining a handle to it<span class="s5"> <br>
</span>*/<span class="s5"> <br>
</span>get_java_field(Object,FieldName,Val):-<span class="s5"> <br>
</span>  get_java_field_handle(Object,FieldName,Handle),<span class="s5"> <br>
</span>  invoke_java_method(Handle,get(Object),Val).<span class="s5"> <br>
 </span></p>
<p class="p10">/*<span class="s5"> <br>
</span>  Set the content of a (public) Java field<span class="s5"> <br>
</span>  to a new value, after obtaining a handle to it<span class="s5"> <br>
</span>*/<span class="s5"> <br>
</span>set_java_field(Object,FieldName,NewVal):-<span class="s5"> <br>
</span>  get_java_field_handle(Object,FieldName,Handle),<span class="s5"> <br>
</span>  invoke_java_method(Handle,set(Object,NewVal),_).</p>
<p class="p10">/*<span class="s5"> <br>
</span>  Get the a handle to the class to which object O is an instance<span class="s5"> <br>
</span>*/<span class="s5"> <br>
</span>get_java_class(O,Class):-<span class="s5"> <br>
</span>  invoke_java_method(O,getClass,Class).<span class="s5"> <br>
 </span></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Wrapping Java Classes as Jinni Classes using Reflection</b></h1>
<p class="p6">A natural way to interface Prolog with Java is by building Prolog class wrappers around Java classes.  We can build a wrapper class using Jinni's Object Oriented Layer to provide in Prolog the "same" functionality as it does in Java. The following example (code in <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/classlib/hashtable.pl"><span class="s1">classlib/hashtable.pl</span></a> )  shows how we can map Java's Hashtables to Prolog classes.</p>
<p class="p10">/*<span class="s5"> <br>
</span> Example of wrapper for a Java class as a Prolog class<span class="s5"> <br>
</span>*/</p>
<p class="p10">hashtable:-<span class="s5"> <br>
</span>  new_java_class('java.util.Hashtable',C),<span class="s5"> <br>
</span>  new_java_object(C,void,JavaHashTable),<span class="s5"> <br>
</span>  table&lt;=JavaHashTable.</p>
<p class="p10">put_data(Key,Data):-<span class="s5"> <br>
</span>  table=&gt;T,<span class="s5"> <br>
</span>  invoke_java_method(T,put(Key,Data),_Result).</p>
<p class="p10">get_data(Key,Data):-<span class="s5"> <br>
</span>  table=&gt;T,<span class="s5"> <br>
</span>  invoke_java_method(T,get(Key),Data).</p>
<p class="p10">remove_data(Key):-<span class="s5"> <br>
</span>  table=&gt;T,<span class="s5"> <br>
</span>  invoke_java_method(T,remove(Key),_Result).</p>
<p class="p7"><b>Example of Prolog interaction:</b></p>
<p class="p10">?- new(hashtable,H),H:put_data(hello,99),H:get_data(hello,X).<span class="s5"> <br>
</span>H = '$instance'(hashtable@554,1) X = 99 ;<span class="s5"> <br>
 </span></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>Extending Jinni's functionality through Reflection</b></h1>
<p class="p6">Here is a (simplified) example on how we build an interface to Jinni's own networking classes, using this reflection based Java calling interface.</p>
<p class="p10">new_server(Port,Server):-<span class="s5"> <br>
</span>  new_java_object('prolog.kernel.Transport'(Port),Server).</p>
<p class="p10">new_service(Server,Service):-<span class="s5"> <br>
</span>  new_java_object('prolog.kernel.Transport'(Server),Service).</p>
<p class="p10">read_from(Service,Query):-<span class="s5"> <br>
</span>  invoke_java_method(Service,read_from,Query).</p>
<p class="p10">write_to(Service,Answer):-<span class="s5"> <br>
</span>  invoke_java_method(Service,write_to(Answer),_).</p>
<p class="p10">% server side RPC handling</p>
<p class="p10">run_server(Port,Password):-<span class="s5"> <br>
</span>  new_server(Port,Server),<span class="s5"> <br>
</span>  repeat,<span class="s5"> <br>
</span>    new_service(Server,Service),<span class="s5"> <br>
</span>    bg(handle_query(Service,Password)),<span class="s5"> <br>
</span>  fail.<span class="s5"> <br>
 </span></p>
<p class="p7">Take a look at the Java files in directory <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/psrc"><span class="s1">psrc</span></a>  for  more examples of built-ins written directly in Prolog. <br>
 </p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; text-align: center; font: 24.0px Times"><b>Calling Jinni<span class="Apple-converted-space">  </span>from Java and back</b></h1>
<p class="p7"><br>
This basic String based interface allows sending a query to Jinni and getting a String back as based on the (first) answer to your queries. Note that Jinni will call back (through the Prolog predicate go/0) the static sayHello() method in class Hello.java.</p>
<p class="p10"><b>Hello.java file:</b></p>
<p class="p10">import java.io.*;<br>
import prolog.kernel.*;<br>
<br>
public class Hello {<br>
   public static String sayHello(String who) {<br>
     System.out.println("Hello "+who);<br>
     return "got "+who;<br>
   } <br>
<br>
   public static void main(String[] args) {<br>
     Machine M=Top.initProlog(args); // args can be null<br>
     System.out.println(M.run("println(hello)")); //calls Jinni<br>
     System.out.println(M.run("X :- X is 1+1")); //gets a result from Jinni<br>
     M.run("mcompile('hello.pl')");<br>
     M.run("go");<br>
   } <br>
}</p>
<p class="p10"><b>hello.pl file:</b></p>
<p class="p10">go:-<br>
  call_java_class_method('Hello',sayHello('Jinni'),Result),<br>
  println('back to Jinni'),<br>
  println('Java said: '=Result).<br>
<span class="s5"> </span></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; text-align: center; font: 24.0px Times"><b>Java-Prolog Interface Techniques for Power Users</b></h1>
<p class="p6">If your application needs very high performance and/or complex data exchanges between Java and Prolog you can adapt the following examples (provided together with a J++ 6.0 project and some simple script files for Windows) in the directory <i>xjinni2k/JavaCallsJinniAndJinniCallsBack</i> ). Here are some scenarios of what can be achieved:<span class="Apple-converted-space"> </span></p>
<p class="p6"> </p>
<ul class="ul1">
  <li class="li6">a Prolog term can be built in Java or read from a String</li>
  <li class="li6">such terms can include handles to arbitrary Java objects to be passed to Prolog</li>
  <li class="li6">methods of Java object and class handles can be called from Prolog using Jinni's Reflection based Java interface</li>
  <li class="li6">handles to Java objects and classes can be asserted to Prolog's dynamic database or added as fields of Prolog Objects</li>
  <li class="li6">bidirectional, multi-threaded call/callback exchanges are prossible and can be initiated from either side</li>
  <li class="li6">applications can embedd Jinni and take advantage of this interface by simply copying the prolog.zip runtime in the application's directory and adding it to the classpath</li>
</ul>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times; min-height: 23.0px"><b></b><br></h2>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>The Java side: file MyMain.java</b></h2>
<p class="p20">import prolog.kernel.*;</p>
<p class="p20">import java.util.*;</p>
<p class="p14"><br></p>
<p class="p20">/**</p>
<p class="p20"> *  Shows examples of calls form Java to Prolog and back</p>
<p class="p20"> */</p>
<p class="p20">public class MyMain  {<span class="Apple-converted-space"> </span></p>
<p class="p20"> </p>
<p class="p20">  /**</p>
<p class="p20">   *  this class embeds Jinni into your application</p>
<p class="p20">   *  make sure prolog.jar is copied in THIS directory</p>
<p class="p20">   *  because that's where Jinni will look for its Java code</p>
<p class="p20">   *  as well as the for its Prolog bytecode.</p>
<p class="p20">   *  Start Jinni with: go.bat, then run.bat</p>
<p class="p20">   */</p>
<p class="p20">  public static void main (String args[]) {<span class="Apple-converted-space"> </span></p>
<p class="p20">    Machine M=Top.initProlog(args);<span class="Apple-converted-space"> </span></p>
<p class="p20">    if(M!=null) {</p>
<p class="p20">      String query="compile('myMain.pl')";</p>
<p class="p20">        testJavaPrologInterface();</p>
<p class="p20">        M.run(query);</p>
<p class="p20">      Top.toplevel(M);</p>
<p class="p20">    }</p>
<p class="p20">    JavaIO.halt(0);</p>
<p class="p20">  }</p>
<p class="p14"><br></p>
<p class="p20">  /**</p>
<p class="p20">   * just makes printing easier</p>
<p class="p20">   */</p>
<p class="p20">  public static void p(String s) {</p>
<p class="p20">    JavaIO.dump(s);</p>
<p class="p20">  }</p>
<p class="p14"><br></p>
<p class="p20">/**</p>
<p class="p20"> *  creates a Prolog machine and runs on in a few queries</p>
<p class="p20"> */  </p>
<p class="p20">public static void testJavaPrologInterface() {</p>
<p class="p14"><br></p>
<p class="p20">  Machine M=Top.new_machine();</p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">  {</p>
<p class="p20">  // simple String queries</p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">    String s=M.run("member(X,[a,b,c])");</p>
<p class="p20">    JavaIO.dump("testJinni: first X in member/3: "+s);   </p>
<p class="p20">     </p>
<p class="p20">    M.run("assert(a(88))");</p>
<p class="p20">    JavaIO.dump("assert works: " + M.run("X:-a(X)"));    </p>
<p class="p20">      </p>
<p class="p20">    // building a compound term query, getting all answers</p>
<p class="p20"> </p>
<p class="p20">    Object X=new Var(1);</p>
<p class="p20">    Object goal_args[]={X,new Integer(1),new Integer(5)};</p>
<p class="p20">    Fun Goal=new Fun("for",goal_args);</p>
<p class="p20">    Object[] answer_args={X,Goal};</p>
<p class="p20">    Fun Query=new Fun(":-",answer_args);</p>
<p class="p20">    if(!M.load_engine(Query)) return;</p>
<p class="p20">    for(;;) {</p>
<p class="p20">      Object answer=M.get_answer();</p>
<p class="p20">      if(null==answer) {</p>
<p class="p20">        // this kills the machine - if still alive -<span class="Apple-converted-space"> </span></p>
<p class="p20">        // it happens after last answer automatically</p>
<p class="p20">        M.stop();<span class="Apple-converted-space"> </span></p>
<p class="p20">        break;</p>
<p class="p20">      }</p>
<p class="p20">      JavaIO.dump("testJinni: X in for/3(X,1,5): "+answer);</p>
<p class="p20">    }</p>
<p class="p20">  }  </p>
<p class="p20">  { // passing to Prolog a Java object for a call back method</p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">    M=Top.new_machine(); // stop killed the previous one</p>
<p class="p20">    Date today=new Date();</p>
<p class="p20">    Object R=new Var(1);</p>
<p class="p20">    Object goal_args[]={today,"toString",R}; // note first arg "today" - it is a handle to a Date</p>
<p class="p20">    Fun Goal=new Fun("invoke_java_method",goal_args); // we build the callback goal</p>
<p class="p20">    Object[] answer_args={R,Goal}; // we build the answer pattern to be returned</p>
<p class="p20">    Fun Query=new Fun(":-",answer_args); // we put them together as a query with clause syntax</p>
<p class="p20">    if(!M.load_engine(Query)) return; // we load the (existing) Prolog engine</p>
<p class="p20">    for(;;) {</p>
<p class="p20">      Object answer=M.get_answer(); // get an answer</p>
<p class="p20">      if(null==answer) {</p>
<p class="p20">        M.stop();</p>
<p class="p20">        break; // exit loop when finished</p>
<p class="p20">      }</p>
<p class="p20">      // print out an answer</p>
<p class="p20">      JavaIO.dump("testJinni: Prolog callback on a Java Date object gives ===&gt; "+answer);</p>
<p class="p20">    }</p>
<p class="p20">  }  </p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">  { // some easier ways to build queries - using special purpose Fun constructors</p>
<p class="p20">    </p>
<p class="p20">    M=Top.new_machine(); // stop killed the previous one</p>
<p class="p20">    Fun List=new Fun(".","a",new Fun(".","b","[]"));</p>
<p class="p20">    Fun Goal=new Fun("append",new Var(1),new Var(2),List); // we build the Prolog goal</p>
<p class="p20">    Fun Query=new Fun(":-",new Fun("result",new Var(1),new Var(2)),Goal); // we put them together as a query with clause syntax</p>
<p class="p20">    if(!M.load_engine(Query)) return; // we load the (existing) Prolog engine</p>
<p class="p20">    for(;;) {</p>
<p class="p20">      Object answer=M.get_answer(); // get an answer</p>
<p class="p20">      if(null==answer) {</p>
<p class="p20">        M.stop();</p>
<p class="p20">        break; // exit loop when finished</p>
<p class="p20">      }</p>
<p class="p20">      // print out an answer</p>
<p class="p20">      JavaIO.dump("testJinni: Prolog nondeterministic list append gives ===&gt; "+answer);</p>
<p class="p20">    }</p>
<p class="p20">  }  </p>
<p class="p20">}  </p>
<p class="p20">  /**</p>
<p class="p20">   *  Exhibits work in Java on a term sent from Prolog</p>
<p class="p20">   */</p>
<p class="p20">  public static Object workOnPrologData(Object oterm) {</p>
<p class="p20">    Machine machine=Top.new_machine();</p>
<p class="p20">   </p>
<p class="p20">    p("TERM===&gt; "+oterm);</p>
<p class="p20">    Object O=((Fun)oterm).args[1];</p>
<p class="p20">    p("CHOP===&gt; "+O);</p>
<p class="p20">    p("NODES===&gt; "+countNodes(O));</p>
<p class="p20">    p("LEAVES===&gt; "+getLeaves(O));</p>
<p class="p20">    </p>
<p class="p20">    Var X=new Var(1); Var Y=new Var(2);</p>
<p class="p20">    Object[] args={</p>
<p class="p20">      "hello",new Integer(11),</p>
<p class="p20">      X,X,Y,Y,</p>
<p class="p20">      new Double(3.14),</p>
<p class="p20">      "bye"</p>
<p class="p20">    };</p>
<p class="p20">    return new Fun("fromJava",args);</p>
<p class="p20">  }<span class="Apple-converted-space"> </span></p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">  /**</p>
<p class="p20">   * simple recursive count node method</p>
<p class="p20">   */</p>
<p class="p20">  static int countNodes(Object O) {</p>
<p class="p20">    p("count_trace: "+O);</p>
<p class="p20">    if(!(O instanceof Fun))<span class="Apple-converted-space"> </span></p>
<p class="p20">      return 1;</p>
<p class="p20">    Fun F=(Fun)O;</p>
<p class="p20">    int count=1;</p>
<p class="p20">    for(int i=0; i&lt;F.args.length;<span class="Apple-converted-space"> </span></p>
<p class="p20">      i++) {</p>
<p class="p20">      count+=countNodes(F.args[i]);</p>
<p class="p20">    }</p>
<p class="p20">    return count;</p>
<p class="p20">  }</p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">  /**</p>
<p class="p20">   * collects leaves (Strings, ints etc.) of a Prolog term seen as tree</p>
<p class="p20">   */</p>
<p class="p20">  static Vector getLeaves(Object O) {</p>
<p class="p20">    Vector V=new Vector();</p>
<p class="p20">    try {</p>
<p class="p20">      getLeaves(O,V);</p>
<p class="p20">    }</p>
<p class="p20">    catch(Exception e) {</p>
<p class="p20">      JavaIO.errmes("error in getLeaves",e);<span class="Apple-converted-space"> </span></p>
<p class="p20">    }</p>
<p class="p20">    return V;</p>
<p class="p20">  }</p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">  /**</p>
<p class="p20">   * recurses over Prolog term seen as a tree</p>
<p class="p20">   */</p>
<p class="p20">  static void getLeaves(Object O,Vector V) {</p>
<p class="p20">    if(!(O instanceof Fun))<span class="Apple-converted-space"> </span></p>
<p class="p20">      V.addElement(O);</p>
<p class="p20">    else {</p>
<p class="p20">      Fun F=(Fun)O;</p>
<p class="p20">      for(int i=0; i&lt;F.args.length; i++) {</p>
<p class="p20">        getLeaves(F.args[i],V);</p>
<p class="p20">      }</p>
<p class="p20">    }</p>
<p class="p20">  }</p>
<p class="p20">}</p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times; min-height: 23.0px"><b></b><br></h2>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>The Prolog side: file myMain.pl</b></h2>
<p class="p10"><span class="s5"><br>
</span>test:-<span class="s5"> <br>
</span>   new_java_class('MyMain',Class),<span class="s5"> <br>
</span>   Term=f(X,g(3.14,hello,X,99),h(Y,Y)),<span class="s5"> <br>
</span>   invoke_java_method(Class,workOnPrologData(Term),Result),<span class="s5"> <br>
</span>   println(Result).</p>
<p class="p10">likes('Joe',beer).<span class="s5"> <br>
</span>likes('Mary',wine).</p>
<p class="p10">:-println('PLEASE TYPE test TO RUN THE OTHER EXAMPLES').<span class="s5"> <br>
 </span></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; text-align: center; font: 24.0px Times"><b>Visual Jinni</b></h1>
<p class="p20"><span class="s5">Visual Jinni is a GUI library built through a set of reflection, engines, threads based Java and Prolog interaction. The Prolog side  works as a high-level visual scripting language on top of a Personal Java (roughly jdk 1.1.8). We will reproduce here the complete Prolog code - which is self-explanatory - hoping that it gives an idea on the power and flexibility of Jinni's reflection based interface - and on putting the various capabilities of Jinni together.</span><br>
<br>
/* builtin building tools - based on Jnnni's Reflection based interface */<br>
<br>
call_gui_method(MethodAndArgs):-call_gui_method(MethodAndArgs,_).<br>
<br>
call_gui_method(MethodAndArgs,Result):-<br>
   call_java_class_method(<br>
     'prolog.kernel.GuiBuiltins',<br>
      MethodAndArgs,<br>
      Result<br>
   ).<br>
<br>
/* builtins */<br>
<br>
show(Container):-call_gui_method(show(Container)).<br>
  <br>
resize(Component,H,V):-call_gui_method(resize(Component,H,V)).<br>
<br>
move(Component,H,V):-call_gui_method(move(Component,H,V)).<br>
<br>
get_applet(A):-call_gui_method('get_applet',A).<br>
<br>
set_font_name(Name):-call_gui_method(set_font_name(Name)).<br>
set_font_style(Style):-call_gui_method(set_font_style(Style)).<br>
set_font_size(Size):-call_gui_method(set_font_size(Size)).<br>
inc_font_size(Size):-call_gui_method(inc_font_size(Size)).<br>
<br>
/* creates a new frame - top window */<br>
<br>
new_frame(Frame):-new_frame('',Frame).<br>
<br>
new_frame(Title,Frame):-new_frame(Title,grid(1,1),Frame).<br>
<br>
new_frame(Title,Layout,Frame):-<br>
  Kind=1,<br>
  new_frame(Title,Layout,Kind,Frame). <br>
  <br>
new_frame(Title,Layout,Kind,Frame):-<br>
  to_layout(Layout,L,X,Y),<br>
  call_gui_method('new_frame'(Title,L,X,Y,Kind),Frame).<br>
<br>
new_panel(Title,Layout,Panel):-<br>
  to_layout(Layout,L,X,Y),<br>
  call_gui_method('new_panel'(Title,L,X,Y),Panel).<br>
<br>
new_label(Parent,Name,Label):-<br>
   call_gui_method('new_label'(Parent,Name),Label).<br>
<br>
new_button(Parent,Name,Action,Button):-<br>
   new_engine(yes,button_action(Action),Handle),<br>
   handle2object(Handle,Machine),<br>
   Goal='new_button'(Parent,Name,Machine),<br>
   call_gui_method(Goal,Button).<br>
 <br>
button_action(Action):-repeat,if(topcall(Action),true,stop).<br>
  <br>
set_label(Label,String):-<br>
   invoke_java_method(Label,setText(String),_).<br>
<br>
new_file_dialog(Mode,Result):-<br>
   call_gui_method('new_file_dialog'(Mode),Result).<br>
<br>
new_text(Parent,Component):-<br>
   new_text(Parent,'',5,20,Component).<br>
<br>
new_text(Parent,String,Component):-<br>
   new_text(Parent,String,2,24,Component).<br>
   <br>
new_text(Parent,String,Rows,Cols,Component):-<br>
   call_gui_method('new_text'(Parent,String,Rows,Cols),Component).<br>
   <br>
set_text(Component,String):-<br>
   invoke_java_method(Component,setText(String),_).  <br>
<br>
clear_text(Component):-set_text(Component,'').<br>
<br>
add_text(Component,String):-<br>
   invoke_java_method(Component,appendText(String),_).  <br>
<br>
get_text(Component,String):-<br>
   invoke_java_method(Component,getText,String).  <br>
<br>
new_color(R,G,B,Color):-<br>
   call_gui_method('new_color'(R,G,B),Color).<br>
   <br>
set_fg(Component,Color):-      <br>
  invoke_java_method(Component,setForeground(Color),_).  <br>
<br>
set_bg(Component,Color):-      <br>
  invoke_java_method(Component,setBackground(Color),_).  <br>
<br>
set_color(Component,Color):-      <br>
  invoke_java_method(Component,setColor(Color),_).  <br>
<br>
remove_all(Container):-<br>
   invoke_java_method(Container,'removeAll',_).<br>
   <br>
destroy(Component):-<br>
   call_gui_method('destroy'(Component)).<br>
<br>
set_layout(Container,Layout):-<br>
   to_layout(Layout,L,X,Y),<br>
   call_gui_method('set_layout'(Container,L,X,Y)).<br>
<br>
new_io_adaptor(OutputArea,Adaptor):-<br>
  call_gui_method('new_io_adaptor'(OutputArea),Adaptor).<br>
<br>
stop_io_adaptor(Adaptor):-<br>
  call_gui_method('stop_io_adaptor'(Adaptor),_).<br>
<br>
<br>
/* used on Panels and Frames with border layout */<br>
<br>
set_direction(Container,String):-<br>
   call_gui_method('set_direction'(Container,String),_).<br>
   <br>
to_layout(grid(X,Y),grid,X,Y):-!.<br>
to_layout(L,L,0,0).<br>
<br>
         <br>
/* derived GUI components */ <br>
<br>
/* Jinni IDE - contains simple editor and console */<br>
<br>
ide:-new_ide.<br>
<br>
new_ide:-new_ide('println(hello)').<br>
<br>
new_ide(Query):-<br>
  new_frame('Jinni IDE',F),<br>
  new_ide(F,Query),<br>
  show(F).<br>
  <br>
new_ide(Container,Query):-<br>
  new_ide(Container,Query,_IDE).<br>
  <br>
new_ide(Container,Query,IDE):-<br>
  new_panel(Container,grid(2,1),IDE),<br>
  new_file_editor(IDE,_E),<br>
  new_console(IDE,Query).<br>
<br>
/* same - but in an applet context */<br>
applet_ide:-applet_ide('println(hello)').<br>
<br>
applet_ide(Query):-<br>
  get_applet(F),<br>
  new_label(F,'Jinni is Coming Out From Its Bottle',_),<br>
  new_ide(Query).<br>
<br>
applet_console:-applet_console('println(hello)').<br>
<br>
applet_console(Query):-<br>
  get_applet(F),<br>
  new_console(F,Query),<br>
  show(F).<br>
      <br>
/* simple Jinni Console - reads, evaluates, prints answers */<br>
      <br>
new_console:-<br>
  new_console('println(hello)').<br>
<br>
new_console(Query):-<br>
  new_frame(F),<br>
  new_console(F,Query),<br>
  show(F).<br>
   <br>
new_console(F,Query):-new_console(F,Query,10,20,_Console).<br>
 <br>
new_console(Container,Query,Rows,Cols,Console):-<br>
  new_panel(Container,border,P),<br>
  set_direction(P,'Center'),<br>
  new_text(P,'% output',Rows,Cols,Output), % center<br>
  set_direction(P,'North'),<br>
  new_active_text(P,'West','?-',Query,1,Cols,'East','Run',<br>
    console_action(Output),_Button,_Input), % top<br>
  Console=Output.<br>
<br>
console_action(Output,S):-<br>
  name(NL,[10]),<br>
  namecat('?- ',S,QS),<br>
  add_text(Output,NL),<br>
  add_text(Output,QS),<br>
  add_text(Output,NL),<br>
  if(<br>
    qsread_goal(S,G,NVs),<br>
    % should be in bg - otherwise gui_readln will block<br>
    bg(<br>
     do_console_action(G,NVs,Output,NL)<br>
    )<br>
    ,<br>
    gui_exception(Output,NL,'syntax_error',S,true)<br>
  ).<br>
  <br>
do_console_action(G,NVs,Output,NL):-<br>
  new_io_adaptor(Output,Adaptor),<br>
  (NVs=[]-&gt;<br>
    (gui_topcall(Output,NL,G)-&gt;A=yes<br>
    ; A=no<br>
    ),<br>
    add_text(Output,A),<br>
    add_text(Output,NL)<br>
  ; <br>
    forall(gui_topcall(Output,NL,G),show_vars_in(Output,NVs,NL)),<br>
    add_text(Output,no),<br>
    add_text(Output,NL)<br>
  ),  <br>
  stop_io_adaptor(Adaptor),<br>
  stop.<br>
<br>
gui_topcall(Output,NL,Goal):-<br>
  catch(topcall(Goal),E,gui_exception(Output,NL,E,Goal,stop)).<br>
<br>
gui_exception(Output,NL,E,_Goal,Finally):-  <br>
  swrite(E,SE),<br>
  add_text(Output,'*** '),add_text(Output,SE),add_text(Output,NL),<br>
  % swrite(Goal,SG),<br>
  % add_text(Output,'in ==&gt; '),add_text(Output,SG),add_text(Output,NL),<br>
  Finally.<br>
   <br>
show_vars_in(Output,NVs,NL):-<br>
  forall(<br>
    member(NV,NVs),<br>
    show_one_var_in(Output,NV,NL)<br>
  ),<br>
  add_text(Output,(';')),<br>
  add_text(Output,NL).<br>
  <br>
show_one_var_in(Output,N=V,NL):-<br>
  add_text(Output,N),<br>
  add_text(Output,'='),<br>
  swrite(V,S),<br>
  add_text(Output,S),<br>
  % add_text(Output,(',')),<br>
  add_text(Output,NL).<br>
  <br>
new_active_text(Parent,LDir,LName, InitString,Rows,Cols,<br>
       Dir,AName,Action, Button, AText):-<br>
  new_panel(Parent,border,Panel),<br>
  set_direction(Panel,LDir),<br>
  new_label(Panel,LName,Label),<br>
  set_direction(Panel,'Center'),<br>
  new_text(Panel,InitString,Rows,Cols,Text), % input<br>
  set_direction(Panel,Dir),<br>
  new_button(Panel,AName,do_text_action(Text,Action),Button),<br>
  new_color(0,0,1,Blue),<br>
  set_fg(Text,Blue),<br>
  set_fg(Label,Blue),<br>
  set_fg(Button,Blue),<br>
  Q is 4/5,<br>
  new_color(Q,Q,Q,Grey),<br>
  set_bg(Button,Grey),<br>
  set_bg(Label,Grey),<br>
  AText=Text.<br>
<br>
do_text_action(Text,Action):-<br>
  Q is 4/5,<br>
  new_color(Q,Q,Q,Gray),<br>
  get_text(Text,Content),<br>
  set_bg(Text,Gray),<br>
  call(Action,Content). <br>
<br>
<br>
/* Jinni Dialog Box - implemented using Hubs - to synchronize consumer and producer threads*/<br>
dialog(Q,A):-dialog(Q,20,100,A).<br>
<br>
dialog(Q,WhereX,WhereY,A):-<br>
  dialog(Q,yes,no,WhereX,WhereY,200,50,A).<br>
<br>
dialog(Q,Y,N,WhereX,WhereY,SizeX,SizeY,A):-<br>
   new_frame('',grid(1,1),0,F),<br>
   move(F,WhereX,WhereY),<br>
   resize(F,SizeX,SizeY),<br>
   dialog_in(F,Q,Y,N,A),<br>
   destroy(F).<br>
<br>
dialog_in(Parent,Q,A):-<br>
   dialog_in(Parent,Q,yes,no,A).<br>
<br>
dialog_in(Parent,Q,Y,N,A):-<br>
   new_panel(Parent,border,F),<br>
   set_direction(F,'Center'),<br>
   new_label(F,Q,_),<br>
   hub(H),<br>
   set_direction(F,'East'),<br>
   new_panel(F,grid(1,2),P),<br>
   new_button(P,Y,hub_put(H,Y),_),<br>
   new_button(P,N, hub_put(H,N),_),<br>
   show(Parent),<br>
   hub_collect(H,R),<br>
   destroy(F),<br>
   hub_stop(H), % should be last<br>
   A=R.<br>
<br>
/* reads a string from a new box - from which sread can be used<br>
   to extract Prolog terms */<br>
      <br>
gui_readln(StringRead):-<br>
   new_frame('',grid(1,1),0,F),resize(F,200,50),<br>
   read_in(F,'&gt;',StringRead),<br>
   destroy(F).<br>
  <br>
read_in(Container,Prompt,StringRead):-<br>
  read_in(Container,Prompt,'',0,0,StringRead).<br>
  <br>
read_in(Parent,Prompt,OldText,Rows,Cols,StringRead):-<br>
  new_panel(Parent,border,Container),<br>
  hub(H),<br>
  new_active_text(Container,'West',Prompt,OldText,Rows,Cols,<br>
    'East','Read',hub_put(H),_Button,_TextComponent),<br>
  show(Parent),<br>
  % println(hub=H),<br>
  hub_collect(H,Result),<br>
  destroy(Container),<br>
  hub_stop(H),<br>
  StringRead=Result.<br>
   <br>
/* Jinni Editor - squeeze to small default initial size size to<br>
   fit on PocketPCs - resize at will ! */   <br>
        <br>
new_editor:-<br>
  new_frame(F),<br>
  new_editor(F,_),<br>
  show(F).<br>
    <br>
new_editor(Container):-new_editor(Container,_).<br>
<br>
new_editor(Container,Editor):-<br>
  new_editor(Container,'',Editor).<br>
<br>
new_editor(Container,OldText,Editor):-<br>
  new_editor(Container,OldText,0,0,Editor).<br>
<br>
new_editor(Container,OldText,Rows,Cols,Editor):-<br>
  new_active_text(Container,'North','Editor',OldText,Rows,Cols,<br>
    'South',<br>
    % 'Reconsult',reconsult_string,<br>
    'Compile',scompile,<br>
    _Button,T),<br>
  Editor=T.  <br>
<br>
new_file_editor:-<br>
  new_frame(F),<br>
  new_file_editor(F,_),<br>
  show(F).<br>
    <br>
new_file_editor(Container,Editor):-<br>
  new_panel(Container,border,Panel),<br>
  set_direction(Panel,'Center'),<br>
  new_editor(Panel,Editor),<br>
  set_direction(Panel,'North'),<br>
  new_panel(Panel,grid(1,4),Buttons),<br>
  new_button(Buttons,'New',clear_action(Editor),_Clear),<br>
  new_button(Buttons,'Load',load_action(Editor),_Load),<br>
  new_button(Buttons,'Save',bg(save_action(Editor)),_Save).<br>
  %new_button(Buttons,'+',inc_font_size(2),_Inc),<br>
  %new_button(Buttons,'-',inc_font_size(-2),_Dec).<br>
      <br>
clear_action(Text):-<br>
  new_color(1,1,1,White),<br>
  set_bg(Text,White),<br>
  set_text(Text,'').<br>
  <br>
load_action(Text):-<br>
  new_file_dialog(0,File),<br>
  file2string(File,S),<br>
  new_color(1,1,1,White),<br>
  set_bg(Text,White),<br>
  set_text(Text,S).<br>
  <br>
save_action(Text):-<br>
  new_file_dialog(1,File),<br>
  get_text(Text,Content),<br>
  string2file(Content,File),<br>
  Q is 4/5,<br>
  new_color(Q,Q,Q,Gray),<br>
  set_bg(Text,Gray).<br>
<span class="s5"> <br>
You might want to take a look at the <a href="file:///Users/tarau/Desktop/sit/jinniprolog/MainProlog/bin/papers"><span class="s1">papers</span></a> directory for some of the research ideas behind the design and implementation of Jinni.</span></p>
<p class="p6"> </p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>Fluents</b></h2>
<p class="p6">Jinni<span class="Apple-converted-space">  </span>can be seen as a collection of <b>Prolog</b> engines working on a given compiled  clause database and calling built-in operations. Through built-in calls, they possess the ability to create other query first class engines and interoperate with Java through a set of stateful objects called <b><i>Fluents</i></b>.</p>
<p class="p7">Fluents are created with specific constructors or by converting from other fluents or conventional Prolog data structures like Terms, Lists or Databases. All Fluents are disabled with a <b>stop/1</b>  operation which releases their resources (most <b>Fluents</b> also call <b>stop/1</b> on backtracking to free resources).</p>
<p class="p7"><b><i>Sources</i></b> are Fluents enabled with an extra <b>get/2</b> operation. Typical Sources are Horn Clause Engines, File, URL or String Readers, Fluents built form Prolog lists. <b><i>Sinks</i></b> are fluents enabled with an extra <b>put/2 and collect/2 </b>operation<b>.</b>Typical fluents are ClauseWriters or CharWriters targeted to Files,  TermCollectors  (implemented as a Java Vectors collecting Prolog terms), StringSinks (implemented as a Java StringBuffers colecting String representations of Prolog terms). Prolog Databases are first class citizens implemented as extensions of Sources which provide <b>add/2, remove/2, collect/2</b> operations.</p>
<p class="p7">Fluents are<i> resources</i> which go throuh state transitions as a result of  <b>put/2</b> or <b>get/2 </b>operations. They end their life cycle in a stopped state when all the resources they hold are freed. An algebra of Fluent composers provides abstract operations on fluents. For instance, <b>append_sources/3</b> creates a new Source with a <b>get/2</b> operation such that when the first Source is stopped, iteration continues over the elements of the second source.   <b>Compose_sources/3</b> provides a cartesian product style composition, the new<b> get/2</b> operation returning pairs of elements of the first and second Source. <b>Split_source/3</b> creates 2 Source objects identical to the Source given as first argument. It allows writing programs which iterate over a given Source multiple times. Sources and Sinks are related through a <b>discharge(Source,Sink)</b>operation which sends all the elements of the Source to the given Sink.</p>
<p class="p7">Here is some Prolog code showing some fluent operations: <br>
 </p>
<p class="p10">element_of(I,X):-get(I,the(A)),select_from(I,A,X).</p>
<p class="p10">select_from(_,A,A).<span class="s5"> <br>
</span>select_from(I,_,X):-element_of(I,X).</p>
<p class="p10">split_source(S,S1,S2):-<span class="s5"> <br>
</span>  findall(NewS,nth_source_clone(2,S,NewS),[S1,S2]).</p>
<p class="p10">split_source(S,S1,S2,S3):-<span class="s5"> <br>
</span>  findall(NewS,nth_source_clone(3,S,NewS),[S1,S2,S3]).</p>
<p class="p10">uniquify_source(S,SWithNoDups):-<span class="s5"> <br>
</span>  findall(E,element_of(S,E),Es),<span class="s5"> <br>
</span>  sort(Es,Sorted),<span class="s5"> <br>
</span>  new_engine(X,member(X,Sorted),SWithNoDups).</p>
<p class="p10">nth_source_clone(N,S,NewS):-<span class="s5"> <br>
</span>  findall(X,element_of(S,X),Xs),<span class="s5"> <br>
</span>  for(_,1,N),<span class="s5"> <br>
</span>  new_engine(X,member(X,Xs),NewS).</p>
<p class="p10">compose_sources(S1,S2,S):-new_engine(X,element_of_either(S1,S2,X),S).</p>
<p class="p10">element_of_either(S1,_,X):-element_of(S1,X).<span class="s5"> <br>
</span>element_of_either(_,S2,X):-element_of(S2,X).</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>File, socket, URL and string based I/O</b></h3>
<p class="p6">Jinni extends Prolog's file and stream I/O based operations to URLs and strings - to give a uniform view of all of them as streams% fluent style readers.<span class="Apple-converted-space"> </span></p>
<p class="p6"> </p>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>Source Fluent based Input Stream constructors:</b></h4>
<p class="p6">new_char_reader(Fname,Reader)</p>
<p class="p7">new_term_string_reader(Fname,Reader)</p>
<p class="p7">new_string_char_reader(String,Reader)</p>
<p class="p7">new_string_term_string_reader(String,Reader)</p>
<p class="p7">new_token_reader(Fname,Reader)</p>
<p class="p7">new_string_token_reader(String,Reader) <br>
 </p>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>Reading a term from the standard input:</b></h4>
<p class="p7"><br>
read_term(Term,VarsAndNames)</p>
<p class="p7">read(Term) <br>
 </p>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>Reading from a string (Prolog atom)</b></h4>
<p class="p7"><br>
sread(AtomString,TermAndVars): reads a term and vars from a string</p>
<p class="p7">sread_term(AtomString,Term)</p>
<p class="p7">sread_term(AtomString,Term,Vars)</p>
<p class="p7">sread_term(AtomString,Term,Vars,Names)</p>
<p class="p7">sread_clause(AtomString,clause(Clause,Vars,Names)</p>
<p class="p7">sread_clauses(S,C): read multiple clauses from a string</p>
<p class="p7">sread_terms(S,C): reads multiple terms from a string</p>
<p class="p7">sread_goal(AtomString,Term,NamesAndVars)</p>
<p class="p7">string_clause_reader(AtomString,ReaderStream)</p>
<p class="p7">get0(X): classic Prolog binary byte reader - returns a 0..255 integer code</p>
<p class="p7">get_code(X) - same as classic Prolog's get0(X) <br>
get_char(C) - returns an atomic char</p>
<p class="p7">get(R) - returns an ascii code ignoring spaces</p>
<p class="p7">see(File): opens for reading</p>
<p class="p7">exists_file(F): checks if a file exists</p>
<p class="p7">find_file(File,NewFile): searches default directories and URLs for a file and  returns path+name <br>
 </p>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>Prolog file input</b></h4>
<p class="p6">pred_of(File,FN): extracts all predicate names F/N found in a Prolog file or URL</p>
<p class="p7">clause_of(File,Clause): extracts all clauses from a Prolog file or URL</p>
<p class="p7">clause_of(File,Clause,VarsAndNames): extracts all clauses from a Prolog file or URL with Vars</p>
<p class="p7">term_of(F,C): extracts all clause terms from a Prolog file or URL</p>
<p class="p7">term_of(F,C,Vs): extracts all clause terms from a Prolog file or URL and their Vars</p>
<p class="p7">term_string_of(F,S): extracts atom (Prolog string) representation of terms in a Prolog file</p>
<p class="p7">url2tokens(URL,Tokens): extract a list if tokens from a file or URL</p>
<p class="p7">token_of(FileOrURL,Token): extracts and backtracks over tokens found in a URL or file</p>
<p class="p7">url2codes(URL,Cs): reads a URL as lists of ascii codes</p>
<p class="p7">url2string(URL,S): reads a file or URL to a Prolog atom</p>
<p class="p7">file2string(F,S): reads a file or URL to a Prolog atom</p>
<p class="p7">char_of(URL,C): reads and backtracks over a URL or file returning ascii codes <br>
 </p>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>Prolog Output Operations</b></h4>
<p class="p6">put_code(AsciiCodeOrByte): writes it to default output<span class="Apple-converted-space"> </span></p>
<p class="p6">put_char(Char): writes it to default output</p>
<p class="p7">write(Term): writes it to default output <br>
print(Term): writes it to default output <br>
writeq(Term): writes it to default output in a way it can be read back</p>
<p class="p7">write_unquoted(Term): writes it to default output</p>
<p class="p7">pp(Term): pretty prints a term or clause to default output</p>
<p class="p7">println(X): writes adding an end of line</p>
<p class="p7">ttynl: writes end of line to standard output</p>
<p class="p7">ttyput(AsciiCode): writes to standard output</p>
<p class="p7">ttyprint(Term): writes term to standard output</p>
<p class="p7">tell(File): sets File as default output device</p>
<p class="p7">tab(N): writes N spaces to default output device <br>
 </p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Fluent Composers</b></h3>
<p class="p6">Fluent composers provide abstract operations on Fluents. They are usually implemented with lazy semantics.</p>
<p class="p7">For instance,<b> append_sources/3</b> creates a new Source with a get/2 operation such that when the first Source is stopped, iteration continues over the elements of the second Source.</p>
<p class="p7"><b>Compose_sources/3</b> provides a cartesian product style composition, the new <b>get/2</b> operation returning pairs of elements of the first and second Source. <b>Reverse_source/2</b> builds a new Source such that its <b>get/2</b> method returns its elements in reverse order.</p>
<p class="p7"><b>Split_source/3</b> creates two Source objects identical to the Source given as first argument. It allows writing programs which iterate over a given Source multiple times. Sources and Sinks are related through a discharge(Source,Sink) operation which sends all the elements of the Source to the given Sink.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #999900"><b>Fluent Modifiers (unimplemented)</b></h3>
<p class="p27">Fluent modifiers allow dynamically changing some attributes of a give Fluent. For instance <b>set_persistent(Fluent,YesNo)</b> is used to make a Fluent survive failure, by disabling its <b>undo</b> method, which, by default, applies the Fluent's <b>stop</b> method on backtracking.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Engines as Source Fluents</b></h3>
<p class="p6">Let us put to work in a more specific way the view of <i>Interpreters as Fluents</i>. All we have to do, is provide is a Fluent constructor, creating an <i>Answer Source</i> from an Answer Pattern and a Goal given to an Interpreter. As a result, we will cover negation, limited pruning through <b>once/1</b>, <b>if-then-else/3</b>, <b>findall/3</b>,<b>var/1</b>, and, beyond standard Prolog, forms of lazy, on-demand generation of sets of solutions, as well as a uniform set of built-ins for manipulation of first class Prolog databases and external objects like Files or URLs.</p>
<p class="p7"><b>Answer Sources</b> (engines) can be seen as generalized iterators, allowing a given program to control answer production in another. Each Answer Source works as a separate Prolog  interpreter.</p>
<p class="p7">The <b>Answer Source</b> constructor initializes a new interpreter.</p>
<p class="p28">new_engine(AnswerPattern,Goal,AnswerSource)</p>
<p class="p6">creates a new Horn Clause solver, uniquely identified by <b>AnswerSource</b> (a Source Fluent), which shares code with the currently running program and is initialized with resolvent <b>Goal</b>. <b>AnswerPattern</b> is a term, usually a list of variables occurring in <b>Goal</b>.</p>
<p class="p7">The <b>get/2</b> operation (provided by all <b>Sources</b>) is used to retrieve successive answers generated by an Answer Source, on demand.</p>
<p class="p28">get(AnswerSource,AnswerInstance)</p>
<p class="p6">tries to harvest the answer computed starting from <b>Goal</b>, as a instance of <b>AnswerPattern</b>. If an answer is found it is returned as <b>the(AnswerInstance)</b>, otherwise <b>no</b> is returned. Note that once <b>no</b> has been returned, all subsequent <b>get/2</b> on the same <b>AnswerSource</b> will return <b>no</b>. Bindings are not propagated to the original <b>Goal</b> or <b>AnswerPattern</b> when <b>get</b> retrieves an answer, i.e. <b>AnswerInstance</b> is obtained by first standardizing apart (renaming) the variables in <b>Goal</b> and <b>AnswerPattern</b>, and then backtracking over its alternative answers in a separate Prolog interpreter. Therefore, backtracking in the caller interpreter does not interfere with the new Answer Source's iteration over answers. Note however that backtracking over the Answer Source's creation point as such makes it unreachable and therefore subject to garbage collection.</p>
<p class="p7">Finally, an Answer Source is stopped with the <b>stop/1</b> operation implemented by all <b>Sources</b>.</p>
<p class="p28">stop(AnswerSource)</p>
<p class="p6">The <b>stop/1</b> operation is called automatically when no more answers can be produced as well as through the Fluent's <b>undo</b> operation on backtracking.<span class="Apple-converted-space"> </span></p>
<p class="p6"> </p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>Note on Jinni's Syntax</b></h2>
<p class="p6"><i>Jinni's new parser actually supports a set of fixed operators, matching something like 80-90% of  those occurring in most Prolog programs. As writing a parser is extremely easy with Jinni's token streams, able to read from strings, files and URLs, the need for Prolog's dynamically (re)defined operators is less stringent.</i></p>
<p class="p7">Unicode based language internationalization is supported by using only the (wide) <b>char</b> type and appropriate JDK 1.x reader and writer classes. Jinni's parser and tokenizer are very small and based on Java's own built-in parsing/tokenizing libraries (StreamTokenizer). This allows relying on code already in  browsers instead of having to load classes over the network. In the future, as Jinni<span class="Apple-converted-space">  </span>is heading towards plain Natural Language input through speech recognition software, it's internal syntax (which might already look too restrictive to Prolog programmers) will be generated through a preprocessor supporting user defined distfix operators. As such, Jinni<span class="Apple-converted-space">  </span>is expected to be able to emulate full Prolog syntax and more. However, Jinni 's current syntax is <i>restricted to standard prefix Prolog terms</i> of the form f(T1,..Tn), with a number of <i>predefined prefix and infix</i> operators. After <i>parsing all clause and expression level operators</i> everything becomes a Prolog Term - which can be described as follows:</p>
<p class="p10">Term ::                                   Const | VARIABLES | CompoundTerm<span class="s5"> <br>
</span>CommaSeparatedTerms ::     Term {,Term}*<span class="s5"> <br>
</span>CompoundTerm ::                  IDENTIFIER(CommaSeperatedTerms)<span class="s5"> <br>
</span>Const ::                                  IDENTIFIER  |  INTEGER  |  REAL | SystemObject</p>
<p class="p7">IDENTIFIERs starting with lower case characters and containing <i>only</i> alphabetical characters do not require quoting, for instance <b>is(X,99)</b> is a valid term. When IDENTIFIERs start with upper case or contain non-alphabetical characters they require single quotes, i.e. you should write something like <span class="s3"><b>':-'(a(X),b(X))</b> or <b>'+'(3,4)</b>.</span> Variables start with upper case characters or "_". Both % one line and /* ... */ multiple line comments are supported. A way to run under full Prolog programs with trickier operator syntax is to <i>write them to a file using plain term syntax</i>.<br>
  <br>
 </p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>Tracing and debugging</b></h2>
<p class="p6">Jinni provides tracing and debugging of both interpreted (dynamic) and compiled code through the use of a tracing metainterpreter. To start tracing of interpreted code just type:</p>
<p class="p7">?-trace(Goal).</p>
<p class="p7">Compiled code needs to be loaded with a special command</p>
<p class="p7">?-debug(File).</p>
<p class="p7">After this, tracing works the same way as with interpreted code:</p>
<p class="p7">?- trace(nrev([1,2],Reversed)). <br>
'Call: 'nrev([1,2],_133) <br>
 'Call: 'nrev([2],_466) <br>
  'Call: 'nrev('[]',_716) <br>
  'Exit: 'nrev('[]','[]') <br>
  'Call: 'app('[]',[2],_466) <br>
  'Exit: 'app('[]',[2],[2])<span class="Apple-converted-space">  </span><br>
 'Exit: 'nrev([2],[2]) <br>
 'Call: 'app([2],[1],_133) <br>
  'Call: 'app('[]',[1],_1451) <br>
  'Exit: 'app('[]',[1],[1]) <br>
 'Exit: 'app([2],[1],[2,1]) <br>
'Exit: 'nrev([1,2],[2,1]) <br>
Reversed = [2,1] ; <br>
'Redo: 'nrev([1,2],[2,1]) <br>
 'Redo: 'app([2],[1],[2,1]) <br>
  'Redo: 'app('[]',[1],[1]) <br>
  'Fail: 'app('[]',[1],_1451) <br>
 'Fail: 'app([2],[1],_133) <br>
 'Redo: 'nrev([2],[2]) <br>
  'Redo: 'app('[]',[2],[2]) <br>
  'Fail: 'app('[]',[2],_466) <br>
  'Redo: 'nrev('[]','[]') <br>
  'Fail: 'nrev('[]',_716) <br>
 'Fail: 'nrev([2],_466) <br>
'Fail: 'nrev([1,2],_133) <br>
no  </p>
<p class="p29"><br></p>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; text-align: center; font: 24.0px Times"><b>Jinni 's Prolog built-in predicates</b></h1>
<p class="p6">Jinni's built-in predicates follow the spirit of Prolog while simplifying when possible and adjusting to its restricted syntax. For their complete executable specification and typical use cases we refer to the file tarau/jinni/lib.pro containing the Jinni system library.</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Basic built-ins of the compiler: covers a subset of BinProlog - an Edinburgh style compiler close to ISO Prolog.</b></h3>
<p class="p30"><i>Note: unimplemented built-ins are marked with ??? Currently some of the built-ins work only in the compiled mode - the behavior is expected to become identical once the interpreter/compiler merge is finished. Launch the interpreter with ji.bat, launch the compiler with </i><b><i>jc.bat</i></b></p>
<ol class="ol1">
  <li class="li31"><span class="s5"><b>!/0</b> <b>: </b></span><i>succeeds like true/0, but removes pending choices in calls at its LEFT and makes things look as if this were the LAST clause of the predicate</i></li>
  <li class="li32"><span class="s5"><b>* /3</b> <b>: </b></span><span class="s9"><i>multiply</i></span><span class="s5"> </span><span class="s10"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-*(10,3,A).</li>
  <li class="li33">A = 30;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li6"><b>(+)/3</b> <b>: </b><span class="s9"><i>add</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-+(10,3,A).</li>
  <li class="li33">A = 13;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(,)/2</b> <b>: </b></span><i>A,B succeeds if A suceeds and B, called after A, succeeds</i></li>
  <li class="li31"><span class="s5"><b>(-)/1</b> <b>: </b></span><i>calls and possibly consumes assumed clause with matching head</i></li>
  <li class="li6"><b>(-)/3</b> <b>: </b><span class="s9"><i>subtract</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?--(10,3,A).</li>
  <li class="li33">A = 7;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(-&gt;)/2</b> <b>: </b></span><i>Cond-&gt;Then executes Cond once; if it succeeds it also executes Then</i></li>
  <li class="li6"><b>/ /3</b> <b>: </b><span class="s9"><i>division</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-/(10,3,A).</li>
  <li class="li33">A = 3.33333;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>// /3</b> <b>: </b></span><i>integer division</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-//(10,3,A).</li>
  <li class="li33">A = 3;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li6"><b>/\ /3</b> <b>: </b><span class="s9"><i>bitwise AND</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-/\(1,2,A).</li>
  <li class="li33">A = 0;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li28"></li>
  <li class="li28"> <span class="Apple-converted-space"> </span></li>
  <li class="li31"><span class="s5"><b>(;)/2</b> <b>: </b></span><i>A;B succeeds if A succeeds or B, called after A, succeeds</i></li>
  <li class="li31"><span class="s5"><b>(&lt;)/2</b> <b>: </b></span><i>numeric comparison</i></li>
  <li class="li31"><span class="s5"><b>&lt;&lt; /3</b> <b>: </b></span><i>left shifts arg 1 by arg 2 bits</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-&lt;&lt;(1,5,A).</li>
  <li class="li33">A = 32;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(=)/2</b> <b>: </b></span><i>(X,Y) true if  terms X and Y unify - cyclic terms can result from =/2, as occur check is not performed</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-f(A,s(a)) = f(B,B).</li>
  <li class="li33">A = s(a);</li>
  <li class="li33">B = s(a);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(=..)/2</b> <b>: </b></span><i>called univ -this is bidirectional- it converts between a term and its view as a alist of components</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-f(a,b) =.. A.</li>
  <li class="li33">A = [f,a,b];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-A =.. [f,a,b].</li>
  <li class="li33">A = f(a,b);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(=:=)/2</b> <b>: </b></span><i>numeric comparison</i></li>
  <li class="li31"><span class="s5"><b>(=&lt;)/2</b> <b>: </b></span><i>numeric comparison</i></li>
  <li class="li31"><span class="s5"><b>(==)/2</b> <b>: </b></span><i>true if args are identical terms</i></li>
  <li class="li31"><span class="s5"><b>(=\=)/2</b> <b>: </b></span><i>numeric comparison</i></li>
  <li class="li31"><span class="s5"><b>(&gt;)/2</b> <b>: </b></span><i>numeric comparison</i></li>
  <li class="li31"><span class="s5"><b>(&gt;=)/2</b> <b>: </b></span><i>numeric comparison</i></li>
  <li class="li31"><span class="s5"><b>&gt;&gt; /3</b> <b>: </b></span><i>right shifts arg 1 by arg 2 bits</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-&gt;&gt;(16,2,A).</li>
  <li class="li33">A = 4;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(@&lt;)/2</b> <b>: </b></span><i>instance of compare/3 with arg 1: &lt;</i></li>
  <li class="li31"><span class="s5"><b>(@=&lt;)/2</b> <b>: </b></span><i>instance of compare/3 with arg 1: = or &lt;</i></li>
  <li class="li31"><span class="s5"><b>(@&gt;)/2</b> <b>: </b></span><i>instance of compare/3 with arg 1: &gt;</i></li>
  <li class="li31"><span class="s5"><b>(@&gt;=)/2</b> <b>: </b></span><i>instance of compare/3 with arg 1: &gt; or =</i></li>
  <li class="li31"><span class="s5"><b>'C'/3</b> <b>: </b></span><i>DCG connect predicate</i></li>
  <li class="li31"><span class="s5"><b>\ /3</b> <b>: </b></span><i>bitwise complement</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-\(0,2,A).</li>
  <li class="li33">A = -3;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(\+)/1</b> <b>: </b></span><i>succeeds if its argument is executed and fails</i></li>
  <li class="li6"><b>\/ /3</b> <b>: </b><span class="s9"><i>bitwise OR</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-\/(1,2,A).</li>
  <li class="li33">A = 3;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>(\=)/2</b> <b>: </b></span><i>true if args fail to unify</i></li>
  <li class="li31"><span class="s5"><b>(\==)/2</b> <b>: </b></span><i>true if arg 1 is not identical to arg 2</i></li>
  <li class="li31"><span class="s5"><b>^ /2</b> <b>: </b></span><i>calls arg 2 and binds arg 1</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-A^eq(A,1).</li>
  <li class="li33">A = 1;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>abolish/1</b> <b>: </b></span><i>abolish(F/N) deletes predicate F/N</i></li>
  <li class="li31"><span class="s5"><b>abort/0</b> <b>: </b></span><i>returns to toplevel</i></li>
  <li class="li31"><span class="s5"><b>and/2</b> <b>: </b></span><i>conjunction, like comma</i></li>
  <li class="li31"><span class="s5"><b>append/3</b> <b>: </b></span><i>concatenates/decomposes lists</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-append([1,2],[3,4],A).</li>
  <li class="li33">A = [1,2,3,4];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-append(A,B,[1,2]).</li>
  <li class="li33">A = [];</li>
  <li class="li33">B = [1,2];</li>
  <li class="li33"></li>
  <li class="li33">A = [1];</li>
  <li class="li33">B = [2];</li>
  <li class="li33"></li>
  <li class="li33">A = [1,2];</li>
  <li class="li33">B = [];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li28"></li>
  <li class="li28"> <span class="Apple-converted-space"> </span></li>
  <li class="li31"><span class="s5"><b>arg/3</b> <b>: </b></span><i>arg(I,T,X) extracts arg I of term T to be unified with X</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-arg(2,f(a,b),A).</li>
  <li class="li33">A = b;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li6"><b>assert/1</b> <b>: </b><span class="s9"><i>adds a clause</i></span></li>
  <li class="li31"><span class="s5"><b>asserta/1</b> <b>: </b></span><i>adds a clause to be first in a predicate definition</i></li>
  <li class="li31"><span class="s5"><b>assertz/1</b> <b>: </b></span><i>adds a clause to be last in a predicate definition</i></li>
  <li class="li31"><span class="s5"><b>atom/1</b> <b>: </b></span><i>true if symbol (functor of arity 0)</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-atom(a).</li>
  <li class="li33"></li>
  <li class="li33">yes</li>
  <li class="li31"><span class="s5"><b>atom_chars/2</b> <b>: </b></span><i>(Atom,CharAtoms): converts between an atom and its list of char atoms representation</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-atom_chars(hello,A).</li>
  <li class="li33">A = [h,e,l,l,o];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-atom_chars(A,[104,101,108,108,111]).</li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>atom_codes/2</b> <b>: </b></span><i>(Atom,CharCodes): converts between an atom and its list of char code representation</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-atom_codes(hello,A).</li>
  <li class="li33"></li>
  <li class="li33">A = [104,101,108,108,111];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-atom_codes(A,[104,101,108,108,111]).</li>
  <li class="li33">A = hello;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>atomic/1</b> <b>: </b></span><i>true if an integer or symbolic constant</i></li>
  <li class="li31"><span class="s5"><b>bagof/3</b> <b>: </b></span><i>all solutions predicate generating unsorted bags of possibly dupplicated answers</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-bagof(A,member(A,[3,2,2,1]),B).</li>
  <li class="li33">A = _x56274;</li>
  <li class="li33">B = [3,2,2,1];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>bb_def/3</b> <b>: </b></span><i>bb_def(K1,K2,T) associates to K1 and K2 (a copy of) T on the blackboard</i></li>
  <li class="li31"><span class="s5"><b>bb_let/3</b> <b>: </b></span><i>bb_let(K1,K2,T) updates or defines the term associated with K1 and K2 to be T</i></li>
  <li class="li31"><span class="s5"><b>bb_rm/2</b> <b>: </b></span><i>removes the term associated with K1 and K2 from the blackboard</i></li>
  <li class="li31"><span class="s5"><b>bb_set/3</b> <b>: </b></span><i>bb_set(K1,K2,T) updates the term associated with K1 and K2 to be a copy of T</i></li>
  <li class="li31"><span class="s5"><b>bb_val/3</b> <b>: </b></span><i>bb_val(K1,K2,T) T is (a copy of) the term associated with keys K1 and K2</i></li>
  <li class="li31"><span class="s5"><b>bg/1</b> <b>: </b></span><i>runs Goal in background thread</i></li>
  <li class="li31"><span class="s5"><b>bg/2</b> <b>: </b></span><i>runs Goal in new background thread, which is returned in second arg</i></li>
  <li class="li31"><span class="s5"><b>jboot/0</b> <b>: </b></span><i>regenerates file wam.bp in psrc directory</i> (from where it should be run)</li>
  <li class="li31"><span class="s5"><b>call/1</b> <b>: </b></span><i>executes (atomic!) arg 1</i></li>
  <li class="li31"><span class="s5"><b>call/2</b> <b>: </b></span><i>efficient call/N variant</i></li>
  <li class="li31"><span class="s5"><b>call/3</b> <b>: </b></span><i>efficient call/N variant</i></li>
  <li class="li31"><span class="s5"><b>call/4</b> <b>: </b></span><i>efficient call/N variant</i></li>
  <li class="li31"><span class="s5"><b>catch/3</b> <b>: </b></span><i>ISO Prolog exception operator: executes arg 1 and if it catches arg 2, it executes arg 3</i></li>
  <li class="li31"><span class="s5"><b>clause/2</b> <b>: </b></span><i>clause(H,B) generates a clause with head matching H and body B</i></li>
  <li class="li31"><span class="s5"><b>compare/3</b> <b>: </b></span><i>returns &lt;,=,&gt; in arg 1 after comparing arg 2 with arg 3</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-compare(A,1,2).</li>
  <li class="li33">A = (&lt;);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-compare(A,f(b),f(a)).</li>
  <li class="li33">A = (&gt;);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-compare(A,s(B),s(B)).</li>
  <li class="li33">A = (=);</li>
  <li class="li33">B = _x56284;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>compile/1</b> <b>: </b></span><i>applies current compilation method to the file arg 1</i></li>
  <li class="li31"><span class="s5"><b>compound/1</b> <b>: </b></span><i>true if it has arity &gt; 0</i></li>
  <li class="li32"><b>EXAMPLE(S):</b><span class="s5"> <br>
</span>?-compound(f(a)).<span class="s5"> </span>yes<span class="s5"><span class="Apple-converted-space"> </span></span></li>
  <li class="li31"><span class="s5"><b>consult/1</b> <b>: </b></span><i>consults with possible duplication of clauses, allows later dynamic recompilation depending on db_ratio/1</i></li>
  <li class="li31"><span class="s5"><b>copy_term/2</b> <b>: </b></span><i>returns a copy of arg 1 with fresh variables</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-copy_term(f(A,A,B,B),C).</li>
  <li class="li33">A = _x56275;</li>
  <li class="li33">B = _x56277;</li>
  <li class="li33">C = f(_x56718,_x56718,_x56720,_x56720);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>new_engine/3</b> <b>: </b></span><i>new_engine(Answer,Goal,IntHandle) creates an engine IntHandle</i></li>
  <li class="li31"><span class="s5"><b>get/2</b> <b>: </b></span><i>get(EngineOrFluent,Answer): gets an answer </i><b><i>the(X) </i></b><i>or</i><b><i>no</i></b> from an engine or other source fluent</li>
  <li class="li31"><span class="s5"><b>stop/1</b> <b>: </b></span><i>stops or closes engine or other fluent</i></li>
  <li class="li31"><span class="s5"><b>ctime/1</b> <b>: </b></span><i>gets elapsed cpu time in ms</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-ctime(A).</li>
  <li class="li33">A = 5247;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>get_db/1</b> <b>: </b></span><i>gets the name (a Java Object) of currently active database</i></li>
  <li class="li31"><span class="s5"><b>current_thread/1</b> <b>: </b></span><i>gets thread id number of current thread</i></li>
  <li class="li31"><span class="s5"><b>db_abolish/2</b> <b>: </b></span><i>db_abolish(DB,F/N) removes predicate F/N from DB</i></li>
  <li class="li31"><span class="s5"><b>db_assert/2</b> <b>: </b></span><i>does assert/1 arg 2 into database given as arg 1</i></li>
  <li class="li31"><span class="s5"><b>db_asserta/2</b> <b>: </b></span><i>does asserta/1 arg 2 into database given as arg 1</i></li>
  <li class="li31"><span class="s5"><b>db_assertz/2</b> <b>: </b></span><i>does assertz/1 arg 2 into database given as arg 1</i> ???</li>
  <li class="li31"><span class="s5"><b>db_clause/3</b> <b>: </b></span><i>clause(DB,H,B) generates a clause found in database DB with head matching H and body B</i></li>
  <li class="li31"><span class="s5"><b>db_clean/0</b> <b>: </b></span><i>abolishes all predicates in currently active database</i></li>
  <li class="li31"><span class="s5"><b>db_clean/1</b> <b>: </b></span><i>db_clean(DB) abolishes all predicates in DB</i></li>
  <li class="li31"><span class="s5"><b>db_move/2</b> <b>: </b></span><i>db_move(FromDB,ToDB) moves the content of database FromDB over database ToDB while replacing similar predicates</i><span class="s5"> ???</span></li>
  <li class="li31"><span class="s5"><b>db_retract/2</b> <b>: </b></span><i>does retract/1 arg 2 from database given as arg 1</i></li>
  <li class="li31"><span class="s5"><b>db_retract1/2</b> <b>: </b></span><i>deletes from database given as arg 1 a matching clause</i></li>
  <li class="li31"><span class="s5"><b>db_retractall/2</b> <b>: </b></span><i>removes from database given as arg 1, all matching clauses</i></li>
  <li class="li31"><span class="s5"><b>db_save/1</b> <b>: </b></span><i>db_save(File) saves all the clauses of the current database to File</i></li>
  <li class="li31"><span class="s5"><b>db_save/2, db_load/2, db_clean/2</b> <b>: </b></span><i>db_save(Db,File) saves using qprint/1 all the clauses of Db to File</i>, db_load loads it, db_clean resets it to empty</li>
  <li class="li31"><span class="s5"><b>display/1</b> <b>: </b></span><i>writes to terminal while ignoring operator definitions</i></li>
  <li class="li31"><span class="s5"><b>end_of_file/0</b> <b>: </b></span><i>Prolog atom returned by read when at the end of a file</i></li>
  <li class="li31"><span class="s5"><b>eq/2</b> <b>: </b></span><i>unifies arg 1 and arg 2, like =</i></li>
  <li class="li31"><span class="s5"><b>errmes/2</b> <b>: </b></span><i>writes error message and fails</i></li>
  <li class="li6"><b>exists_file/1</b> <b>: </b><span class="s9"><i>true if file exists</i></span></li>
  <li class="li31"><span class="s5"><b>return/1</b> <b>: </b></span><i>leaves current engine with arg 1 as returned value instead of computed answer</i></li>
  <li class="li31"><span class="s5"><b>expand_term/2</b> <b>: </b></span><i>expands a term according to DCG expansion rules</i></li>
  <li class="li6"><b>fail/0</b> <b>: </b><span class="s9"><i>always fails</i></span></li>
  <li class="li31"><span class="s5"><b>findall/3</b> <b>: </b></span><i>findall(X,G,Xs) collects copies of all answers X of G to Xs. If less then half of the heap is free, it allocates new engine for running G</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-findall(s(A),(member(A,[1,2,3]),A </li>
  <li class="li33">&gt;  1),B).</li>
  <li class="li33">A = _x56278;</li>
  <li class="li33">B = [s(2),s(3)];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>findall/4</b> <b>: </b></span><i>findall(X,G,Xs,Ys) appends the list of answers X of G to Ys to obtain Xs</i></li>
  <li class="li32"><b>EXAMPLE(S):</b><span class="s5"> <br>
</span>?-findall(s(A),(A = 1 ; A = 2),B,[3,4]).<span class="s5"> <br>
</span>A = _x56285;<span class="s5"> <br>
</span>B = [s(1),s(2),3,4];<span class="s5"> </span>no<span class="s5"><span class="Apple-converted-space"> </span></span></li>
  <li class="li31"><span class="s5"><b>float/1</b> <b>: </b></span><i>true if represented as a 64 bit float number (C-double)</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-float(3.14).</li>
  <li class="li33"></li>
  <li class="li33">yes</li>
  <li class="li6"><b>floor/2,ceiling/2,round/2</b> <b>: </b><span class="s9"><i>float to int functions</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-floor(1.3,A).</li>
  <li class="li33">A = 1;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>foldl/4</b> <b>: </b></span><i>(Op,InitialValue,List,?Result) accumulates values interating over List with binary Op</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-foldl(+,0,[10,20,30],A).</li>
  <li class="li33">A = 60;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>foldr/4</b> <b>: </b></span><i>(Op,InitialValue,List,?Result) accumulates values interating over List with binary Op</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-foldr(+,0,[10,20,30],A).</li>
  <li class="li33">A = 60;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>for/3</b> <b>: </b></span><i>generates an integer in a range</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-for(A,1,3).</li>
  <li class="li33">A = 1;</li>
  <li class="li33"></li>
  <li class="li33">A = 2;</li>
  <li class="li33"></li>
  <li class="li33">A = 3;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>forall/2</b> <b>: </b></span><i>forall(A,B) for each answer returned by A computes and igonres all answers comuted by B without any binding - used for its side effects - (note: not expressed with the usual double negation trick - this really makes sure </i><b><i>all</i></b><i> alternatives of A are explored!)</i></li>
  <li class="li31"><span class="s5"><b>functor/3</b> <b>: </b></span><i>builds or decomposes a coumpound term</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-functor(f(a,b),A,B).</li>
  <li class="li33">A = f;</li>
  <li class="li33">B = 2;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-functor(A,f,3).</li>
  <li class="li33">A = f(_x56878,_x56879,_x56880);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-functor(f(a),f,1).</li>
  <li class="li33"></li>
  <li class="li33">yes</li>
  <li class="li31"><span class="s5"><b>gensym/2</b> <b>: </b></span><i>generates a new name based on arg 1</i></li>
  <li class="li31"><span class="s5"><b>get/1</b> <b>: </b></span><i>inputs the next char code after skiping over white space</i></li>
  <li class="li31"><span class="s5"><b>get0/1</b> <b>: </b></span><i>reads a char as an ascii code</i></li>
  <li class="li31"><span class="s5"><b>get_char/2</b> <b>: </b></span><i>(Stream,CharAsOneLetterConstant): inputs a char from a stream -ISO Prolog ???</i></li>
  <li class="li31"><span class="s5"><b>get_code/1</b> <b>: </b></span><i>ISO char code reader</i> ???</li>
  <li class="li31"><span class="s5"><b>get_code/2</b> <b>: </b></span><i>inputs a char code from a stream - ISO</i> ???</li>
  <li class="li31"><span class="s5"><b>get_password/1</b> <b>: </b></span><i>gets default password for user</i> ???</li>
  <li class="li31"><span class="s5"><b>ground/1</b> <b>: </b></span><i>true if arg has no free variables</i>  ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-ground(f(a,b)).</li>
  <li class="li33"></li>
  <li class="li33">yes</li>
  <li class="li6"><b>halt/0</b> <b>: </b><span class="s9"><i>stops Prolog</i></span></li>
  <li class="li31"><span class="s5"><b>if_any/3</b> <b>: </b></span><i>(Cond,Then,Else): executes Cond; each time when Cond succeeds it also executes Then; if Cond never succeds it executes Else</i></li>
  <li class="li31"><span class="s5"><b>in/1</b> <b>: </b></span><i>waits to remove a term from Linda server</i></li>
  <li class="li6"><b>integer/1</b> <b>: </b><span class="s9"><i>true if an integer</i></span></li>
  <li class="li31"><span class="s5"><b>integer/2</b> <b>: </b></span><i>float to int cast</i> ???</li>
  <li class="li31"><span class="s5"><b>interactive/1: </b></span><i>toggles interactive query answering/tracing with arg 1 = yes or no</i></li>
  <li class="li31"><span class="s5"><b>(is)/2</b> <b>: </b></span><i>calls the function evaluator, mostly for arithmetics</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-A is 3+4*2.</li>
  <li class="li33">A = 11;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>is_builtin/1</b> <b>: </b></span><i>recognizes a predicate head as a builtin</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-is_builtin(var(A)).</li>
  <li class="li33">A = _x56271;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>is_compiled/1</b> <b>: </b></span><i>true if head of a compiled predicate</i></li>
  <li class="li6"><b>is_dynamic/1: </b><span class="s9"><i>checks if dynamic</i></span></li>
  <li class="li31"><span class="s5"><b>is_prolog/1</b> <b>: </b></span><i>recognizes two modes jinni_compiled and jinni_interpreted - useful for portability</i></li>
  <li class="li31"><span class="s5"><b>keysort/2</b> <b>: </b></span><i>sorts while grouping similar keys</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-keysort([3-a,1-a,2-b,1-c,2-d],A).</li>
  <li class="li33">A = [1-a,1-c,2-b,2-d,3-a];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>length/2</b> <b>: </b></span><i>generates/mesures length of a list</i></li>
  <li class="li31"><span class="s5"><b>listing/0</b> <b>: </b></span><i>lists current database</i></li>
  <li class="li31"><span class="s5"><b>listing/1</b> <b>: </b></span><i>lists given predicate if in current database</i></li>
  <li class="li31"><span class="s5"><b>listing/2</b> <b>: </b></span><i>lists predicate F of arity N if in current database</i></li>
  <li class="li31"><span class="s5"><b>log/2</b> <b>: </b></span><i>float function</i>  ???</li>
  <li class="li31"><span class="s5"><b>log/3</b> <b>: </b></span><i>returns log in base arg 1 of arg 2, a float</i> ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-log(2,8,A).</li>
  <li class="li33">A = 3;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>login/1</b> <b>: </b></span><i>assumes default (nick)name for user</i> ???</li>
  <li class="li31"><span class="s5"><b>main/0</b> <b>: </b></span><i>user defined optional startup predicate</i></li>
  <li class="li31"><span class="s5"><b>main/1</b> <b>: </b></span><i>default entry predicate</i></li>
  <li class="li31"><span class="s5"><b>map/3</b> <b>: </b></span><i>maps a predicate with 2 args to a list</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-map(+1,[10,20],A).</li>
  <li class="li33">A = [11,21];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>max/3</b> <b>: </b></span><i>(X,Y,Max): Max is the max of 2 numbers X, Y</i></li>
  <li class="li31"><span class="s5"><b>member/2</b> <b>: </b></span><i>(X,Xs): checks if an element X unifies with an element on a list Xs or generates successively longer lists if Xs is unbound or open ended</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-member(2,[1,2]).</li>
  <li class="li33"></li>
  <li class="li33">yes</li>
  <li class="li33">?-member(A,[1,2]).</li>
  <li class="li33">A = 1;</li>
  <li class="li33"></li>
  <li class="li33">A = 2;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li6"><b>merge_sort/3</b> <b>: </b><span class="s9"><i>(Order,List,Sorted)</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-merge_sort(&gt;,[1,3,2,2,4],A).</li>
  <li class="li33">A = [4,3,2,2,1];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>metacall/1</b> <b>: </b></span><i>calls the interpreter</i></li>
  <li class="li31"><span class="s5"><b>min/3</b> <b>: </b></span><i>(X,Y,Min): Min is the min of 2 numbers X, Y</i></li>
  <li class="li6"><b>mod/3</b> <b>: </b><span class="s9"><i>modulo</i></span> <span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-mod(10,3,A).</li>
  <li class="li33">A = 1;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>move/0</b> <b>: </b></span><i>first key Mobile Code operation: picks up wrapped continuation and moves to remote site is there/0 has been set, or runs it locally if here/0 has been set</i> ???</li>
  <li class="li31"><span class="s5"><b>name/2</b> <b>: </b></span><i>bi-directional: converts atomic to/from list of chars</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-name(hello,A).</li>
  <li class="li33">A = [104,101,108,108,111];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-name(A,[98,121,101]).</li>
  <li class="li33">A = bye;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>namecat/4</b> <b>: </b></span><i>concatenates 3 names</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-namecat(a,:,b,A).</li>
  <li class="li33">A = a:b;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>new/2</b> <b>: </b></span><i>new(ClassFile,Instance): creates class instance using code from file, i.e. new('progs/nrev',Instance)</i></li>
  <li class="li31"><span class="s5"><b>nl/0</b> <b>: </b></span><i>writes a new line character</i></li>
  <li class="li31"><span class="s5"><b>nonvar/1</b> <b>: </b></span><i>true if currently instantiated</i></li>
  <li class="li31"><span class="s5"><b>not/1</b> <b>: </b></span><i>negation</i> as failure</li>
  <li class="li31"><span class="s5"><b>notify_about/1</b> <b>: </b></span><i>notifies a suspended matching wait_for(Term,Contraint), if Constraint holds, that Term is available</i></li>
  <li class="li31"><span class="s5"><b>nth_member/3</b> <b>: </b></span><i>retrieves N-th element of a list</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-nth_member(A,[a,b,c],B).</li>
  <li class="li33">A = a;</li>
  <li class="li33">B = 1;</li>
  <li class="li33"></li>
  <li class="li33">A = b;</li>
  <li class="li33">B = 2;</li>
  <li class="li33"></li>
  <li class="li33">A = c;</li>
  <li class="li33">B = 3;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>number/1</b> <b>: </b></span><i>true if integer or float</i></li>
  <li class="li31"><span class="s5"><b>number_chars/2</b> <b>: </b></span><i>(Number,CharAtoms): converts between a number and its list of char atoms representation</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-number_chars(1999,A).</li>
  <li class="li33">A = [1,9,9,9];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>number_codes/2</b> <b>: </b></span><i>(Number,CharCodes): converts between a number and its list of char code representation</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-number_codes(1999,A).</li>
  <li class="li33">A = [49,57,57,57];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-number_codes(A,[50,48,48,49]).</li>
  <li class="li33">A = 2001;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>numbervars/3</b> <b>: </b></span><i>binds to $VAR(I) with I over distinct integers variables in a term</i></li>
  <li class="li31"><span class="s5"><b>out/1</b> <b>: </b></span><i>puts a term on Linda server or trigers resumption of a matching in/1 waiting for this data</i></li>
  <li class="li31"><span class="s5"><b>password/1</b> <b>: </b></span><i>assumes default password for user</i> ???</li>
  <li class="li31"><span class="s5"><b>phrase/2</b> <b>: </b></span><i>(Axiom, ?InputChars): DCG evaluator, starting from Axiom, consuming/producing InputChars</i></li>
  <li class="li31"><span class="s5"><b>phrase/3</b> <b>: </b></span><i>(Axiom, ?InputChars, ?OutputChars): DCG evaluator, staring from Axiom</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-phrase(([a],[b]),[a,b|A],A).</li>
  <li class="li33">A = _x56276;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>pow/3</b> <b>: </b></span><i>(Base,Expo,Val) computes power function</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-pow(2,3,A).</li>
  <li class="li33">A = 8;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>pp_clause/1</b> <b>: </b></span><i>prints out a clause with some care on how it looks</i></li>
  <li class="li31"><span class="s5"><b>println/1</b> <b>: </b></span><i>synchronized printing of a term on a line</i></li>
  <li class="li31"><span class="s5"><b>prod/2</b> <b>: </b></span><i>(List, ?Result): product of a list</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-prod([10,20],A).</li>
  <li class="li33">A = 200;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>put/1</b> <b>: </b></span><i>writes and ascii code as a char</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-put(99).</li>
  <li class="li33">c</li>
  <li class="li33">yes</li>
  <li class="li31"><span class="s5"><b>put_char/2</b> <b>: </b></span><i>(Stream,CharAsOneLetterConstant): outputs a char to a stream -ISO Prolog</i></li>
  <li class="li31"><span class="s5"><b>put_code/1</b> <b>: </b></span><i>ISO char code writer</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-put_code(99).</li>
  <li class="li33">c</li>
  <li class="li33">yes</li>
  <li class="li31"><span class="s5"><b>put_code/2</b> <b>: </b></span><i>outputs a char code to a stream - ISO</i></li>
  <li class="li31"><span class="s5"><b>qprint/1</b> <b>: </b></span><i>prints out a clause such that a variant of it can be always read back</i> ???</li>
  <li class="li31"><span class="s5"><b>random/1</b> <b>: </b></span><i>returns a random integer</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-random(A).</li>
  <li class="li33">A = 3439;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>qcompile/1</b> <b>: </b></span><i>compiles quickly to memory</i></li>
  <li class="li31"><span class="s5"><b>rd/1</b> <b>: </b></span><i>reads a term matching arg 1 from Linda server</i></li>
  <li class="li6"><b>read/1</b> <b>: </b><span class="s9"><i>reads a term</i></span></li>
  <li class="li31"><span class="s5"><b>read_term/2</b> <b>: </b></span><i>reads a term and also a list of variable-name associations</i></li>
  <li class="li31"><span class="s5"><b>sread/2</b> <b>: </b></span><i>reads a term from a constant</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-sread(f(X,X,Y,Y),A).</li>
  <li class="li33">A = f(_1,_1,_2,_2)-['X'=_1,'Y'=_2];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>reconsult/1</b> <b>: </b></span><i>reconsults a file to current database as interpreted code, replaces duplicate predicate definitions already existing</i></li>
  <li class="li31"><span class="s5"><b>remote_run/1</b> <b>: </b></span><i>runs Goal on localhost Linda server using default password</i></li>
  <li class="li31"><span class="s5"><b>remote_run/3</b> <b>: </b></span><i>(Answer,Goal,Result): runs Goal on loclhost server and binds Answer with result</i></li>
  <li class="li31"><span class="s5"><b>remote_run/6</b> <b>: </b></span><i>(Host,Port,Answer,Goal,Password,Reply): if Password matches password of the remote server, runs Goal there and returns Reply from server</i></li>
  <li class="li31"><span class="s5"><b>repeat/0</b> <b>: </b></span><i>backtracks until its continuation succeeds; defined as repeat. repeat:-repeat.</i></li>
  <li class="li31"><span class="s5"><b>restart/0</b> <b>: </b></span><i>cleans up data areas and reinitializes symbol tables</i></li>
  <li class="li31"><span class="s5"><b>retract/1</b> <b>: </b></span><i>backtracks over deleting matching clauses</i></li>
  <li class="li31"><span class="s5"><b>retract1/1</b> <b>: </b></span><i>deletes first matching clause in the current database</i></li>
  <li class="li31"><span class="s5"><b>retractall/1</b> <b>: </b></span><i>deletes all matching clauses</i></li>
  <li class="li31"><span class="s5"><b>return/1</b> <b>: </b></span><i> returns a value (arg 1) as answer of an engine</i></li>
  <li class="li31"><span class="s5"><b>return/0</b> <b>: </b></span><i>second key Mobile Code operation: forces the moved continuation to come back and run left over goals</i> ???</li>
  <li class="li31"><span class="s5"><b>round/2</b> <b>: </b></span><i>float to int function</i>  ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-round(1.51,A).</li>
  <li class="li33">A = 2;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>rtime/1</b> <b>: </b></span><i>gets elapsed real time in secs</i> since start ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-rtime(A).</li>
  <li class="li33">A = 6;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>run_server/0</b> <b>: </b></span><i>runs foreground server on localhost, on a free port</i></li>
  <li class="li31"><span class="s5"><b>run_server/1</b> <b>: </b></span><i>runs foreground server on given or on free Port</i></li>
  <li class="li31"><span class="s4"><b>run_server/2: </b></span><i>(Port,Passwd): runs server protected with Passwd  on Port - server will answer </i><b><i>remote_run</i></b><i> requests</i></li>
  <li class="li31"><span class="s5"><b>see_at/1</b> <b>: </b></span><i>seeks a seekable file at a give offset (in bytes)</i> ???</li>
  <li class="li31"><span class="s5"><b>see_or_fail/1</b> <b>: </b></span><i>opens a file if it exists, otherwise fails</i></li>
  <li class="li31"><span class="s5"><b>seeing/1</b> <b>: </b></span><i>gets file name opened and set by see/1</i></li>
  <li class="li31"><span class="s5"><b>seeing_at/1</b> <b>: </b></span><i>retrieves position in current file opened by see/1 ???</i></li>
  <li class="li31"><span class="s5"><b>seen/0</b> <b>: </b></span><i>close file opened by see/1</i></li>
  <li class="li31"><span class="s5"><b>set_input/1</b> <b>: </b></span><i>sets current input stream</i> ???</li>
  <li class="li31"><span class="s5"><b>setof/3</b> <b>: </b></span><i>all solutions predicate generating sorted sets of unduplicated answers</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-setof(A,member(A,[3,2,2,1]),B).</li>
  <li class="li33">A = _x56274;</li>
  <li class="li33">B = [1,2,3];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>sign/2</b> <b>: </b></span><i>int function</i> ???</li>
  <li class="li6"><b>sin/2</b> <b>: </b><span class="s9"><i>float function</i></span></li>
  <li class="li31"><span class="s5"><b>sort/2</b> <b>: </b></span><i>sorts and removes duplicates -see also merge_sort/3-</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-sort([2,1,3,1,4,4,2],A).</li>
  <li class="li33">A = [1,2,3,4];</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>spy/1</b> <b>: </b></span><i>set spy point on goal, triggering trace when interpreted</i></li>
  <li class="li31"><span class="s5"><b>spying/1</b> <b>: </b></span><i>checks what we are spying</i></li>
  <li class="li31"><span class="s5"><b>sqrt/2</b> <b>: </b></span><i>returns square root of arg 1, a float</i> ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-sqrt(2,A).</li>
  <li class="li33">A = 1.41421;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li32"><span class="s5"><b>sread/2</b> <b>: </b></span><span class="s9"><i>reads a term from a string (atom)</i> </span><b>:</b><span class="s5"> <br>
</span>?-sread('f(X,Y)',A-B).<span class="s5"> <br>
</span>A = f(_x56645,_x56646);<span class="s5"> <br>
</span>B = ['X' = _x56645,'Y' = _x56646];<span class="s5"> </span>no<span class="s5"><span class="Apple-converted-space"> </span></span></li>
  <li class="li31"><span class="s5"><b>stat/0</b> <b>: </b></span><i>short hand for statistics</i></li>
  <li class="li31"><span class="s5"><b>statistics/0</b> <b>: </b></span><i>shows info about data areas</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-statistics.</li>
  <li class="li33">runtime = [1191,1191]</li>
  <li class="li33">global_stack = [199,824]</li>
  <li class="li33">local_stack = [5,3]</li>
  <li class="li33">trail = [7,1]</li>
  <li class="li33">code = [12784,19984]</li>
  <li class="li33">symbols = [552,0]</li>
  <li class="li33">htable = [776,1272]</li>
  <li class="li33"></li>
  <li class="li33"></li>
  <li class="li33">yes</li>
  <li class="li31"><span class="s5"><b>statistics/2</b> <b>: </b></span><i>returns info about data areas</i></li>
  <li class="li31"><span class="s5"><b>stop/0</b> <b>: </b></span><i>exits current engine</i></li>
  <li class="li31"><span class="s5"><b>stop/1</b> <b>: </b></span><i>stops and frees resources held by an engine or other fluent (may happen automaticaly if an engine fails)</i></li>
  <li class="li31"><span class="s5"><b>sum/2</b> <b>: </b></span><i>(List,?Result): sum of a list</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-sum([10,20],A).</li>
  <li class="li33">A = 30;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>swrite/2</b> <b>: </b></span><i>writes a term to a string (atom)</i></li>
  <li class="li31"><span class="s5"><b>symcat/3</b> <b>: </b></span><i>makes new identifier from arg 1 and arg 2</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-symcat(a,b,A).</li>
  <li class="li33">A = a_b;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-symcat(a,1,A).</li>
  <li class="li33">A = a_1;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>system/1</b> <b>: </b></span><i>passes a command to the OS</i></li>
  <li class="li31"><span class="s5"><b>system/2</b> <b>: </b></span><i>passes a command to the OS and gets back return code</i> ???</li>
  <li class="li31"><span class="s5"><b>tab/1</b> <b>: </b></span><i>outputs N blanks</i></li>
  <li class="li31"><span class="s5"><b>talk/0</b> <b>: </b></span><i>sends what you type in, to another Jinni  user</i> ???</li>
  <li class="li6"><b>tan/2</b> <b>: </b><span class="s9"><i>float function</i></span></li>
  <li class="li31"><span class="s5"><b>tell/1</b> <b>: </b></span><i>focuses output on a file</i></li>
  <li class="li31"><span class="s5"><b>tell_at/1</b> <b>: </b></span><i>moves output file pointer to a given offset (in bytes)</i> ???</li>
  <li class="li31"><span class="s5"><b>tell_at_end/1</b> <b>: </b></span><i>focuses output on file opened in append mode</i> ???</li>
  <li class="li31"><span class="s5"><b>telling/1</b> <b>: </b></span><i>gets file name opened and set by tell/1</i></li>
  <li class="li31"><span class="s5"><b>telling_at/1</b> <b>: </b></span><i>retrieves output file position (in bytes)</i></li>
  <li class="li31"><span class="s5"><b>term_append/3</b> <b>: </b></span><i>efficiently concatenates 2 terms</i><span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-term_append(f(a,b),g(c,d),A).</li>
  <li class="li33">A = f(a,b,c,d);</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>term_expansion/2</b> <b>: </b></span><i>can be used to define a hook into the default DCG expansion mechanism</i></li>
  <li class="li31"><span class="s5"><b>term_hash/2</b> <b>: </b></span><i>computes hash code on main functor and functors of arguments; fails if something is unbound</i> ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-term_hash(t(a,b),A).</li>
  <li class="li33">A = 40050;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-term_hash(t(a,c),A).</li>
  <li class="li33">A = 40051;</li>
  <li class="li33"></li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>term_hash/3</b> <b>: </b></span><i>computes hash code based on main functor and functors of listed argument positions; fails if something is unbound</i> ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-term_hash(t(a,b),[1,2],A).</li>
  <li class="li33">A = 40050;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li33">?-term_hash(t(a,c),[1,2],A).</li>
  <li class="li33">A = 40051;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>this/1</b> <b>: </b></span><i>returns current object handle ???</i></li>
  <li class="li31"><span class="s5"><b>throw/1</b> <b>: </b></span><i>ISO Prolog exception operator: throws a term to be caught by a matching catch</i></li>
  <li class="li31"><span class="s5"><b>told/0</b> <b>: </b></span><i>closes file opened by tell/1</i></li>
  <li class="li31"><span class="s5"><b>topcall/1</b> <b>: </b></span><i>calls arg 1 and signals uncaught exception thrown by ISO Prolog built-in throw/3</i></li>
  <li class="li31"><span class="s5"><b>toplevel/0</b> <b>: </b></span><i>interactive toplevel Prolog loop</i></li>
  <li class="li6"><b>true/0</b> <b>: </b><span class="s9"><i>always succeeds</i></span></li>
  <li class="li31"><span class="s5"><b>truncate/2</b> <b>: </b></span><i>float to int function</i> ???<span class="s5"> </span><span class="s11"><b>EXAMPLE(S):</b> </span></li>
  <li class="li33">?-truncate(1.51,A).</li>
  <li class="li33">A = 1;</li>
  <li class="li33"></li>
  <li class="li33">no</li>
  <li class="li31"><span class="s5"><b>var/1</b> <b>: </b></span><i>true if currently an unbound variable</i></li>
  <li class="li31"><span class="s5"><b>wait_for/2</b> <b>: </b></span><i>wait_for(Term,Constraint) waits for a term on the blackboard, such that Constraint hold</i></li>
  <li class="li31"><span class="s5"><b>write/1</b> <b>: </b></span><i>writes to current output stream set with tell/1, defaults to Prolog's stdio</i><span class="s5"> <br>
 </span></li>
</ol>
<p class="p19"><br></p>
<p class="p13"><br></p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 18.0px Times; min-height: 23.0px"><b></b><br></h2>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 22.0px Times"><b>Jinni Prolog Server Agents</b></h2>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 14.0px Times"><b>The Jinni Natural Language Chat Agent</b></h3>
<p class="p6">This agent  (built as combination of Web services and interface adaptors) is available as part of the<b><i> Natural Language Processing Toolkit (distributed with BinProlog)</i> </b>.<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p6">The agent synergistically integrates (using a variety of multi-agent communication protocols) components like:</p>
<ul class="ul1">
  <li class="li6">a Prolog-based WordNet knowledge base,</li>
  <li class="li6">a flexible pattern driven natural language processor,</li>
  <li class="li6">XML based ontologies and Web metasearch using a Google API.</li>
</ul>
<p class="p20">The details of the agent architecture are described  <a href="http://logic.csci.unt.edu/tarau/research/2003/"><span class="s1">here</span></a>.<span class="Apple-converted-space"> </span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 14.0px Times"><b>The Jinni Prolog Stock Market Historic Data Generator</b></h3>
<p class="p6">This agent  (built as combination of Web services and interface adaptors) is available as part of the<span class="Apple-converted-space"> </span><b><i> Internet Progrtamming Toolkit (part of BinProlog)</i></b>.<span class="Apple-converted-space"> </span></p>
<p class="p6">The demo provides downloadable Prolog fact files about the last 10 years or so of stock market data for thousand of stocks. The API provides elegant manipulation of the data for use in various datamining applications of Logic Programming.</p>
<p class="p13"><br></p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 22.0px Times"><b>Jinni Extensions</b></h2>
<p class="p6">Various Jinni extensions (some free, some commercial)  provide added functionality in a modular way. Extensions refer to the core Jinni component through a unique prolog.jar file, which packages Java classes as well as Prolog source or bytecode. Most Jinni extensions are available in source form. Here are some exemples of  Jinni extension modules.</p>
<ul class="ul1">
  <li class="li6">SAX Parser based XML processor</li>
  <li class="li6">various WordNet processing tools (part of the<span class="Apple-converted-space">  </span>Natural Language Toolkit)</li>
  <li class="li6">TCP-IP tunelling kit</li>
  <li class="li6">Google API</li>
  <li class="li6">Yahoo IM adaptor</li>
  <li class="li6">Jinni3D Jinni java3D based agent-oriented animation and graph layout API</li>
  <li class="li6">Jinni C# adaptor</li>
  <li class="li6">various third party graph-layout adaptors</li>
  <li class="li6">Jinni remote shell adaptor</li>
  <li class="li6">HTTP-server (now part of Jinni)</li>
  <li class="li6">lightweight wireless PDA client for server-side Jinni processors</li>
</ul>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 14.0px Times"><b>The Jinni3D Java3D-based Agent-Oriented 3D-Animation and 3D-Graph Layout API</b></h3>
<p class="p37"><br></p>
<p class="p38">This Jinni extension requires installing Java3D, available as a Java extension module from <b>sun.com</b>. The API is Agent-Oriented - i.e. each element of the 3D world is an agent implemented as an autonomous Java3D behavior.  The basic idea of this API is very simple: a Prolog user can update/retrive the state of an agent at will. The Java3D renderier will periodically revisit and render the current state of each agents. Besides efficiency, this provides an interaction model which can meke use of verious local and remote Jinni resources independently of the Java3D animation and geomtry rendering process.</p>
<p class="p39"><br></p>
<p class="p38">From a Prolog user's perspective agent animation is achieved simply by sending translation, rotation and scaling commands (or can be put on autopilot). A combination of Java3D custom made shapes, loaded *.obj models built with external tools and Prolog based planning or knowledge processing allows a programmer to build complex 3D programs like games, data visualisations, virtual reality applications etc.</p>
<p class="p39"><br></p>
<p class="p38">As an application of the API we have developed an agent-based 3D layout tool where vertices and edges are represented as agents driven by a combination of spectral and force based layour algorithm. The layout tool allows printing the resulting graphs and saving them as PNG images. After the layout algorithm terminates, a compact "frozen graph" representation is also provided that represents graphs containing thousands of nodes as a single point/line geometry node.</p>
<p class="p40"><br></p>
<p class="p40"><br></p>
<p class="p41">% shows a Jinni3D canvas</p>
<p class="p41">show3d(RG):-show3d(RG,20,400,400,400).</p>
<p class="p40"><br></p>
<p class="p41">% shows a Jinni3D canvas for Timout msecs in a world<span class="Apple-converted-space"> </span></p>
<p class="p41">% with given 3D radius and screen dimensions</p>
<p class="p41">show3d(RG,TimeOut,Radius,Width,Height):</p>
<p class="p40"><br></p>
<p class="p41">% creates a new 3D world in which various 3D agents are placed</p>
<p class="p41">new_world(U)</p>
<p class="p40"><br></p>
<p class="p41">% simple objects represented as agents</p>
<p class="p41">sphere(U,A)</p>
<p class="p41">point(U,A)</p>
<p class="p41">line(U,A)</p>
<p class="p41">tetra(U,A)</p>
<p class="p41">box(U,A)</p>
<p class="p41">color_cube(U,A)</p>
<p class="p41">pyram(U,A)</p>
<p class="p41">cone(U,A)</p>
<p class="p41">cylinder(U,A)</p>
<p class="p41">text2D(U,Text,A)</p>
<p class="p41">text3D(U,Text,A)</p>
<p class="p41">model3D(U,FileOrURL,A): imports Wavefront OBJ models as animated agents</p>
<p class="p40"><br></p>
<p class="p41">% creation of agents=object+behaviors</p>
<p class="p40"><br></p>
<p class="p41">% adds an agent with text content (i.e. 2D or 3D text)</p>
<p class="p41">add_agent(U,Shape,Text,A):</p>
<p class="p40"><br></p>
<p class="p41">% adds an agent of a given shape <span class="Apple-converted-space"> </span></p>
<p class="p41">add_agent(U,Shape,A):</p>
<p class="p40"><br></p>
<p class="p41">% adds randomly shaped/positioned agent</p>
<p class="p41">add_agent(U,A)</p>
<p class="p40"><br></p>
<p class="p41">% adds a vertex agent - to be positioned by a LayoutEngine</p>
<p class="p41">vertex_agent(U,L,V)</p>
<p class="p40"><br></p>
<p class="p41">% adds an edge agent - to be positioned by a LayoutEngine <span class="Apple-converted-space"> </span></p>
<p class="p41">edge_agent(U,From,To,Label,E)</p>
<p class="p6"> <span class="Apple-converted-space"> </span></p>
<p class="p41">% adds an edge agent - represented as an animated object moving from source to target<span class="Apple-converted-space"> </span></p>
<p class="p41">mobil_edge_agent(U,From,To,Label,E)</p>
<p class="p41"> <span class="Apple-converted-space"> </span></p>
<p class="p41">% display the world in frame of given size    <span class="Apple-converted-space"> </span></p>
<p class="p41">show_world(U,Width,Height)</p>
<p class="p40"><br></p>
<p class="p41">% displays a default size world</p>
<p class="p41">show_world(U):-show_world(U,400,400).</p>
<p class="p41"> </p>
<p class="p41">% destroys world U <span class="Apple-converted-space"> </span></p>
<p class="p41">stop_world(U)</p>
<p class="p40"><br></p>
<p class="p41">% stops and discards an agent<span class="Apple-converted-space"> </span></p>
<p class="p41">stop_agent(A)</p>
<p class="p40"><br></p>
<p class="p41">% resets an agent in center of the world and default parameters</p>
<p class="p41">reset_agent(A)</p>
<p class="p40"><br></p>
<p class="p41">% makes an agent invisible</p>
<p class="p41">hide_agent(A)</p>
<p class="p40"><br></p>
<p class="p41">% makes an agent visible again</p>
<p class="p41">show_agent(A)</p>
<p class="p40"><br></p>
<p class="p41">% moves an agent A to coordinates X,Y,Z</p>
<p class="p41">move_to(A,X,Y,Z)</p>
<p class="p40"><br></p>
<p class="p41">% rotates an agent A using 3 Euler angles X,Y,Z</p>
<p class="p41">rotate_to(A,X,Y,Z)</p>
<p class="p40"><br></p>
<p class="p41">% scales an agent A uniformly to S</p>
<p class="p41">scale_to(A,S)</p>
<p class="p41"> </p>
<p class="p41">% scales an agent by different rations on each coordinate <span class="Apple-converted-space"> </span></p>
<p class="p41">scale_to(A,X,Y,Z)</p>
<p class="p40"><br></p>
<p class="p41">% increment an agent's current postion by X,Y or Z</p>
<p class="p41">inc_x(A,X)</p>
<p class="p41">inc_y(A,Y)</p>
<p class="p41">inc_z(A,Z)</p>
<p class="p40"><br></p>
<p class="p41">% rotates an agent by a give Euler angle X,Y or Z</p>
<p class="p41">inc_rot_x(A,X)</p>
<p class="p41">inc_rot_y(A,Y)</p>
<p class="p41">inc_rot_z(A,Z)</p>
<p class="p40"><br></p>
<p class="p41">% sets the time after which the renderer will redisplay</p>
<p class="p41">% changes made to the state of the agent</p>
<p class="p41">set_wake_up(A,Tick)</p>
<p class="p40"><br></p>
<p class="p41">% starts/stops autmatic random animation for agent A <span class="Apple-converted-space"> </span></p>
<p class="p41">auto(A,BoolString)</p>
<p class="p40"><br></p>
<p class="p41">% gets current X,Y or Z coordinate of an agent</p>
<p class="p41">get_x(A,R)</p>
<p class="p41">get_y(A,R)</p>
<p class="p41">get_z(A,R)</p>
<p class="p40"><br></p>
<p class="p41">% gets current X,Y or Z Euler angle rotation of an agent</p>
<p class="p41">get_rot_x(A,R)</p>
<p class="p41">get_rot_y(A,R)</p>
<p class="p41">get_rot_z(A,R)</p>
<p class="p40"><br></p>
<p class="p41">% gets current X,Y or Z scale factor of agent A</p>
<p class="p41">get_scale_x(A,R)</p>
<p class="p41">get_scale_y(A,R)</p>
<p class="p41">get_scale_z(A,R)</p>
<p class="p40"><br></p>
<p class="p41">% gets the complete translation/rotation/scale of an agent</p>
<p class="p41">get_agent_state(A,[pos(X,Y,Z),rot(RX,RY,RZ),scale(SX,SY,SZ)]):-</p>
<p class="p41">  get_x(A,X),</p>
<p class="p41">  get_y(A,Y),</p>
<p class="p41">  get_z(A,Z),</p>
<p class="p41">  get_rot_x(A,RX),</p>
<p class="p41">  get_rot_y(A,RY),</p>
<p class="p41">  get_rot_z(A,RZ),</p>
<p class="p41">  get_scale_x(A,SX),</p>
<p class="p41">  get_scale_y(A,SY),</p>
<p class="p41">  get_scale_z(A,SZ).</p>
<p class="p40"><br></p>
<p class="p41">% returns a string rrepresentation of agent A</p>
<p class="p41">agent_to_string(A,S)</p>
<p class="p13"><br></p>
<p class="p6">ViewPoint animation is supported by either setting the view directly or by "attaching" the ViewPoint to any agent. As the agent moves, the viewpoint is following it a proviedes a first person view centered on the agent.</p>
<p class="p13"><br></p>
<p class="p6">% sets the coordinates of the 'camera' the world is viewed from   <span class="Apple-converted-space"> </span></p>
<p class="p6">set_view(U,X,Y,Z):-</p>
<p class="p6">  invoke_java_method(U,setView(X,Y,Z),_).</p>
<p class="p13"><br></p>
<p class="p6">% sets a given agent as a 'holder' of the 'camera' that will follow its transforms  <span class="Apple-converted-space"> </span></p>
<p class="p6">set_holder(U,A):-</p>
<p class="p6">  invoke_java_method(U,setHolder(A),_).</p>
<p class="p13"><br></p>
<p class="p6">remove_holder(U):-</p>
<p class="p6">  invoke_java_method(U,removeHolder,_). <span class="Apple-converted-space"> </span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times"><b>Demos:</b></h3>
<p class="p6"><b>Type test3d to run a demo test suite for Jinni3D.</b></p>
<p class="p13"><br></p>
<p class="p6">Creating a set of animated agents in Jinni3D is very easy, as seen in the following examples:</p>
<p class="p13"><br></p>
<p class="p20">simple3d:-</p>
<p class="p20">  N=6,</p>
<p class="p20">  new_world(U),</p>
<p class="p20">  findall(A,(</p>
<p class="p20">    for(I,0,N),</p>
<p class="p20">      add_agent(U,I,A),</p>
<p class="p20">      Z is -(1+I),inc_z(A,Z),</p>
<p class="p20">      Y is (I-N/2)/3,inc_y(A,Y)</p>
<p class="p20">    ),As),</p>
<p class="p20">  show_world(U),</p>
<p class="p20">  sleep(5),</p>
<p class="p20">  foreach(member(A,As),auto(A,true)),</p>
<p class="p20">  sleep(10),</p>
<p class="p20">  foreach(member(A,As),stop_agent(A)),</p>
<p class="p20">  stop_world(U).</p>
<p class="p14"><br></p>
<p class="p20">other3d:-</p>
<p class="p20">  N=3,Txt='Hello!',</p>
<p class="p20">  new_world(U),</p>
<p class="p20">  findall(A,(</p>
<p class="p20">    for(I,0,N),</p>
<p class="p20">      add_agent(U,I,Txt,A),</p>
<p class="p20">      Z is -(1+I),inc_z(A,Z),</p>
<p class="p20">      Y is (I-N/2)/3,inc_y(A,Y)</p>
<p class="p20">    ),As),</p>
<p class="p20">  show_world(U),</p>
<p class="p20">  sleep(10),</p>
<p class="p20">  foreach(member(A,As),auto(A,true)),</p>
<p class="p20">  sleep(10),</p>
<p class="p20">  foreach(member(A,As),stop_agent(A)),</p>
<p class="p20">  stop_world(U).</p>
<p class="p20"> <span class="Apple-converted-space"> </span></p>
<p class="p20">g31:-</p>
<p class="p20">  new_world(U),</p>
<p class="p20">  text3D(U,'Rotate me!',A),</p>
<p class="p20">  show_world(U),</p>
<p class="p20">  sleep(10),</p>
<p class="p20">  stop_agent(A),</p>
<p class="p20">  stop_world(U).</p>
<p class="p20">  <span class="Apple-converted-space"> </span></p>
<p class="p20">g32:-</p>
<p class="p20">   new_world(U),</p>
<p class="p20">   sphere(U,A),</p>
<p class="p20">   show_world(U,240,320),</p>
<p class="p20">   sleep(10),</p>
<p class="p20">   stop_agent(A),</p>
<p class="p20">   stop_world(U).</p>
<p class="p20">  <span class="Apple-converted-space"> </span></p>
<p class="p20">g33:-</p>
<p class="p20">   new_world(U),</p>
<p class="p20">   color_cube(U,A),</p>
<p class="p20">   show_world(U),</p>
<p class="p20">   sleep(5),</p>
<p class="p20">   inc_z(A,-1),</p>
<p class="p20">   set_wake_up(A,500),</p>
<p class="p20">   (for(_I,1,10),</p>
<p class="p20">     inc_rot_z(A,0.1),</p>
<p class="p20">     inc_x(A,0.1),</p>
<p class="p20">     get_agent_state(A,S),</p>
<p class="p20">     println(state=S),</p>
<p class="p20">     % sleep(1),</p>
<p class="p20">     fail</p>
<p class="p20">   ;true</p>
<p class="p20">   ),</p>
<p class="p20">   (for(_I,1,10),</p>
<p class="p20">     inc_rot_z(A,0.1),</p>
<p class="p20">     inc_x(A,-0.1),</p>
<p class="p20">     get_agent_state(A,S),</p>
<p class="p20">     println(state=S),</p>
<p class="p20">     % sleep(1),</p>
<p class="p20">     fail</p>
<p class="p20">   ;true</p>
<p class="p20">   ),</p>
<p class="p20">   sleep(5),</p>
<p class="p20">   auto(A,true),</p>
<p class="p20">   sleep(10),</p>
<p class="p20">   stop_agent(A),</p>
<p class="p20">   stop_world(U).</p>
<p class="p20">  <span class="Apple-converted-space"> </span></p>
<p class="p20">   <span class="Apple-converted-space"> </span></p>
<p class="p20">g34:-    <span class="Apple-converted-space"> </span></p>
<p class="p20">   new_world(U),</p>
<p class="p20">   text3D(U,'Hiding!',A),</p>
<p class="p20">   inc_x(A,0.2),</p>
<p class="p20">   show_world(U),</p>
<p class="p20">   (for(_,1,3),</p>
<p class="p20">     sleep(5),</p>
<p class="p20">     println(hiding=A),</p>
<p class="p20">     hide_agent(A),</p>
<p class="p20">     sleep(5),</p>
<p class="p20">     println(showing=A),</p>
<p class="p20">     show_agent(A),</p>
<p class="p20">     fail</p>
<p class="p20">   ; true</p>
<p class="p20">   ),</p>
<p class="p20">   stop_agent(A),</p>
<p class="p20">   stop_world(U).</p>
<p class="p14"><br></p>
<p class="p20">% graph layout demos</p>
<p class="p20">   <span class="Apple-converted-space"> </span></p>
<p class="p20">gr1:-</p>
<p class="p20">  new_world(U),</p>
<p class="p20">  vertex_agent(U,hello,V1),move_to(V1,-0.5,0.5,-0.5),</p>
<p class="p20">  vertex_agent(U,bye,V2),move_to(V2,0.5,0,-0.5),</p>
<p class="p20">  edge_agent(U,V1,V2,bye,_E),</p>
<p class="p20">  show_world(U),</p>
<p class="p20">  sleep(10),</p>
<p class="p20">  stop_world(U).</p>
<p class="p14"><br></p>
<p class="p20">gr:-</p>
<p class="p20">  random_ranked_graph(G,Info),</p>
<p class="p20">  trim_ranked_graph(G,2,20,TG),</p>
<p class="p20">  println(Info),</p>
<p class="p20">  show3d(TG).</p>
<p class="p20">  <span class="Apple-converted-space"> </span></p>
<p class="p20">gr2:-</p>
<p class="p20">  new_world(U),</p>
<p class="p20">  gr2(U),</p>
<p class="p20">  show_world(U),</p>
<p class="p20">  sleep(15),</p>
<p class="p20">  stop_world(U).</p>
<p class="p20">         <span class="Apple-converted-space"> </span></p>
<p class="p20">gr2(U):-</p>
<p class="p20">  random_ranked_graph(G,Info),</p>
<p class="p20">  println(Info),</p>
<p class="p20">  findall(V-VA,(</p>
<p class="p20">       vertex_of(G,V),</p>
<p class="p20">       % vertex_data(G,V,VD),</p>
<p class="p20">       VD=V,</p>
<p class="p20">       vertex_agent(U,VD,VA),</p>
<p class="p20">       auto(VA,true)</p>
<p class="p20">     ),</p>
<p class="p20">     VAs),</p>
<p class="p20">   member(V-VA,VAs),</p>
<p class="p20">     outgoing_of(G,V,To),</p>
<p class="p20">       member(To-ToA,VAs),</p>
<p class="p20">       %edge_data(G,V,To,ED),</p>
<p class="p20">       ED=e(from=V,to=To),</p>
<p class="p20">         edge_agent(U,VA,ToA,ED,_EA),</p>
<p class="p20">  fail.</p>
<p class="p20">gr2(_).         <span class="Apple-converted-space"> </span></p>
<p class="p6">  <span class="Apple-converted-space"> </span></p>
<p class="p6">  <span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 14.0px Times"><b>The Jinni Yahoo IM adaptor</b></h3>
<p class="p6">The adaptor (available as part of BinProlog<b>)</b> allows building Jinni agents which can interact withYahoo IM Messenger users (subject to create a free Yahoo IM account on behalf of your agent) . Try out our natural language enabled chat agent, by adding the <span class="s3"><b>jinni_agent</b></span> handle as one of your Yahoo IM <b>friends</b>! The Prolog API allows you  to send a message to a Yahoo IM user with:</p>
<p class="p13"><br></p>
<p class="p20">?-say(UserHandle,Message) .</p>
<p class="p13"><br></p>
<p class="p6">and react to messages received form IM users by defining a message handler like the following:</p>
<p class="p13"><br></p>
<p class="p20">% JinniMessenger IM agent event handler</p>
<p class="p20">handle_observed_event(signal(connected,Messenger)):-!,</p>
<p class="p20">  let(sender,Messenger).</p>
<p class="p20">handle_observed_event(instant_mes(From,Q)):-!,</p>
<p class="p20">  chat_agent_cmd(From,none,Q,A),</p>
<p class="p20">  say_to_all(From,Q,A).</p>
<p class="p20">handle_observed_event(offline_mes(From,Q)):-!,</p>
<p class="p20">  chat_agent_cmd(From,none,Q,A),</p>
<p class="p20">  say(From,A).   <span class="Apple-converted-space"> </span></p>
<p class="p20">handle_observed_event(Event):-</p>
<p class="p20">  invoke_java_method(Event,toString,S),</p>
<p class="p20">  println(no_default_handling_for_event=S).</p>
<p class="p13"><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 14.0px Times"><b>The Jinni Google API adaptor</b></h3>
<p class="p6">The adaptor (available as part of the<span class="Apple-converted-space"> </span><b><i> Internet Progrtamming Toolkit</i></b> and the<b><i> Natural Language Processing Toolkit</i>)</b> allows building Jinni agents which can extract high level data in Prolog form by using the Google Web Services API (subject to obtain your own free 1000 hits/day Google search key code from them and download their last Java based API adaptor).<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p20"><b>?- url_of('Free Lunch',URL).</b></p>
<p class="p20">URL = http://www.nofreelunch.org/</p>
<p class="p20">;</p>
<p class="p20">URL = http://www.economy.com/freelunch/</p>
<p class="p20">;</p>
<p class="p20">URL = http://www.freelunchdesign.com/</p>
<p class="p6">...</p>
<p class="p14"><br></p>
<p class="p20"><b>?- snippet_of('Agent Programming with Jinni',Answer).</b></p>
<p class="p20">Answer = 'Agent Programming Constructs and Object Oriented Logic Programming in Jinni.<span class="Apple-converted-space"> </span></p>
<p class="p20">The Jinni  Ontology: Orthogonal Language Constructs for Agent Programming'</p>
<p class="p14"><br></p>
<p class="p20">?- category_of('Agent Programming',Answer).</p>
<p class="p20">Answer = Top/Computers/Programming/Agents/Microsoft_Agent</p>
<p class="p14"><br></p>
<p class="p20">?- title_of('Matrix Reloaded',Answer).</p>
<p class="p20">Answer = The Matrix: Revolutions</p>
<p class="p20">;</p>
<p class="p20">Answer = Apple - Trailers - Matrix Reloaded</p>
<p class="p20">;</p>
<p class="p20">Answer = The Editing Room - The Matrix Reloaded: The Abridged Script</p>
<p class="p20">....</p>
<p class="p14"><br></p>
<p class="p20"><b>?- summary_of('The Matrix Reloaded',Answer).</b></p>
<p class="p20">Answer = Official site for the series. Cast and crew biographies, interviews,</p>
<p class="p20">ph otographs, production notes,...</p>
<p class="p20">;</p>
<p class="p20">Answer = A short academic analysis of religious allegories in the film.</p>
<p class="p6">...</p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; text-align: center; font: 14.0px Times"><b>The Jinni SAX 2.0 based XML Processing Component</b></h3>
<p class="p13"><br></p>
<p class="p6">Located in the <b>jinni_xml</b> sub-directory of the <b>xjinni2k</b> component collection, the XML Processor contains the following:</p>
<p class="p6">Located in the <b>jinni_xml</b> sub-directory of the <b>xjinni2k</b> component collection, the XML Processor contains the following:</p>
<ul class="ul1">
  <li class="li6">a Jinni<span class="Apple-converted-space">  </span>adaptor to the SAX 2.0 event based XML Parser</li>
  <li class="li6">a converter of Prolog terms to a reversible XML reprsentation</li>
  <li class="li6">a parser written in Prologfor converting back XML represented terms</li>
</ul>
<h4 style="margin: 0.0px 0.0px 15.0px 0.0px; font: 12.0px Times"><b>The Jinni adaptor to the SAX 2.0 event based XML Parser</b></h4>
<p class="p6">The SAX 2.0 parser coming with Sun's Java (1.4 or later) is event based. As the parser walks through an XML file - a number of events are generated. They are calls to a DefaultHandler instance that can be overriden selectively by the application programmer. Instead of the naive approach consisting off attaching these events to Jinni calls resulting in side effects on the Prolog side we have set up a producer-consumer mechanism which allows a Jinni thread to collect and process XML events in a natural and (if the programmer prefers so) completely side effect free style. Each class of Jinni's handler hierarchy implements the interface Runnable - as it will run on a separate thread communicating with its Prolog peer. Our design is meant to be easily extended both on the Prolog and the Java side. This component comes in source form - to allow quick changes and fixes for your application. If you wish, some of those changes and improvements will be merged in our source code.</p>
<p class="p13"><br></p>
<p class="p6">The class hierarchy is organized as follows:</p>
<h2 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Times"><b>Class Hierarchy</b></h2>
<ul class="ul1">
  <li class="li6">class java.lang.Object</li>
  <ul class="ul2">
    <li class="li6">class org.xml.sax.helpers.DefaultHandler (implements org.xml.sax.ContentHandler, org.xml.sax.DTDHandler, org.xml.sax.EntityResolver, org.xml.sax.ErrorHandler)</li>
    <ul class="ul3">
      <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/GenericJinniXMLHandler.html"><span class="s12"><b>GenericJinniXMLHandler</b></span></a> (implements java.lang.Runnable)</li>
      <ul class="ul3">
        <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html"><span class="s12"><b>FullXMLHandler</b></span></a> (implements java.lang.Runnable)</li>
        <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/SimpleXMLTermHandler.html"><span class="s12"><b>SimpleXMLTermHandler</b></span></a> (implements java.lang.Runnable)</li>
        <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/XMLTermBuilder.html"><span class="s12"><b>XMLTermBuilder</b></span></a> (implements java.lang.Runnable)</li>
        <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/XMLTermHandler.html"><span class="s12"><b>XMLTermHandler</b></span></a> (implements java.lang.Runnable)</li>
      </ul>
    </ul>
    <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/Main.html"><span class="s12"><b>Main</b></span></a></li>
    <li class="li6">class xml_converter.<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/XMLConverter.html"><span class="s12"><b>XMLConverter</b></span></a></li>
  </ul>
</ul>
<p class="p19"><br></p>
<p class="p13"><br></p>
<p class="p6"><b>FullXMLHandler</b></p>
<p class="p7">This class sends events to Prolog for each member of the DefaultHandler SAX adaptor. It ensures that everything a programmer can do in Java with these events can also be done in Prolog. It provides a "complete" mapping from the set of events provided by the DefaultHandler of the SAX parser to similarly named Prolog terms. Each of the following methods is sent to Prolog as a term to be handled by <b>xml_event_of(FileOrURL,Event)</b> which backtracks over the set of XML events resulting from calling the SAX parser on a file or URL.<br>
</p>
<table width="782.0" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td colspan="2" valign="middle" class="td1">
        <p class="p42"><b>Method Summary</b></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#characters%28char%5B%5D,%20int,%20int%29"><b>characters</b></a></span>(char[] buf, int offset, int len)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">          Receive notification of character data inside an element.</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p44"><span class="s2"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#endDocument%28%29"><b>endDocument</b></a></span><span class="s5">()</span><span class="s14"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">          Receive notification of the end of the document.</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#endElement%28java.lang.String,%20java.lang.String,%20java.lang.String%29"><b>endElement</b></a></span>(java.lang.String namespaceURI, java.lang.String sName, java.lang.String qName)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">          Receive notification of the end of an element.</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#endPrefixMapping%28java.lang.String%29"><b>endPrefixMapping</b></a></span>(java.lang.String prefix)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#error%28org.xml.sax.SAXParseException%29"><b>error</b></a></span>(org.xml.sax.SAXParseException e)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#fatalError%28org.xml.sax.SAXParseException%29"><b>fatalError</b></a></span>(org.xml.sax.SAXParseException e)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#ignorableWhitespace%28char%5B%5D,%20int,%20int%29"><b>ignorableWhitespace</b></a></span>(char[] ch, int start, int length)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#notationDecl%28java.lang.String,%20java.lang.String,%20java.lang.String%29"><b>notationDecl</b></a></span>(java.lang.String name, java.lang.String publicId, java.lang.String systemId)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#processingInstruction%28java.lang.String,%20java.lang.String%29"><b>processingInstruction</b></a></span>(java.lang.String target, java.lang.String data)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#setDocumentLocator%28org.xml.sax.Locator%29"><b>setDocumentLocator</b></a></span>(org.xml.sax.Locator locator)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#skippedEntity%28java.lang.String%29"><b>skippedEntity</b></a></span>(java.lang.String name)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p44"><span class="s2"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#startDocument%28%29"><b>startDocument</b></a></span><span class="s5">()</span><span class="s14"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">          Receive notification of the start of the document.</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#startElement%28java.lang.String,%20java.lang.String,%20java.lang.String,%20org.xml.sax.Attributes%29"><b>startElement</b></a></span>(java.lang.String namespaceURI, java.lang.String sName, java.lang.String qName, org.xml.sax.Attributes attrs)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#startPrefixMapping%28java.lang.String,%20java.lang.String%29"><b>startPrefixMapping</b></a></span>(java.lang.String prefix, java.lang.String uri)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#unparsedEntityDecl%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29"><b>unparsedEntityDecl</b></a></span>(java.lang.String name, java.lang.String publicId, java.lang.String systemId, java.lang.String notationName)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p43"> void</p>
      </td>
      <td valign="middle" class="td3">
        <p class="p28"><span class="s1"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/FullXMLHandler.html#warning%28org.xml.sax.SAXParseException%29"><b>warning</b></a></span>(org.xml.sax.SAXParseException e)<span class="s13"><span class="Apple-converted-space"> </span></span></p>
        <p class="p6">           </p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p6"> </p>
<table width="782.0" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td4">
        <p class="p6"><b>Methods inherited from class xml_converter.</b><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/GenericJinniXMLHandler.html"><span class="s1"><b>GenericJinniXMLHandler</b></span></a></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td5">
        <p class="p44"><span class="s2"><a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/GenericJinniXMLHandler.html#bg_run%28%29">bg_run</a></span><span class="s5">,<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/GenericJinniXMLHandler.html#run%28%29"><span class="s15">run</span></a>,<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/GenericJinniXMLHandler.html#send_term%28java.lang.Object%29"><span class="s15">send_term</span></a>,<a href="file:///C:/tarau/xjinni2k/jinni_xml/jdoc/xml_converter/GenericJinniXMLHandler.html#signal_end%28%29"><span class="s15">signal_end</span></a></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p18"><br></p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<p class="p6"><b>GenericJinniXMLHandler</b></p>
<p class="p7">This class acts as a no-action adaptor for various SAX Parser based Handlers. While it actually calls the parser, it only sends <b><i>end of processing notification</i></b>, needed to properly terminate the Prolog side processing.</p>
<p class="p6"><b>SimpleXMLTermHandler and XMLTermHandler</b></p>
<p class="p7">These adaptors focus on XML represented handling Prolog terms. They only override the (few) methods needed for the task. A quick look at <b>prolog_data.xml</b>, which will be read in by <b>xml2prolog_parser/2</b>as a set of Prolog <i>terms</i>, gives an idea on the structure of the XML data this class handles.</p>
<p class="p6">This root class creates a handler, based on a given input file or URL and Hub. The hub receives SAX events converted to Jinni's external Prolog term representation. This is its PRODUCER side. A CONSUMER Prolog thread pulls out these events as if they were "read" from a stream.<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p6">The constructor:</p>
<p class="p28"><b>XMLTermHandler</b>(String infile,Hub hub) called from Prolog using Jinni's reflection based Java interface<span class="Apple-converted-space"> </span></p>
<p class="p28">creates a handler, based on a given input file and Hub used to communicate with the Prolog side.</p>
<p class="p6"><b>XMLTermBuilder</b></p>
<p class="p13"><br></p>
<p class="p6">This adaptor focuses on XML represented handling Prolog terms. This class builds, for faster processing - Prolog terms directly - the work happens in Java. It really gives the illusion of having a DOM parser. The complete "syntax tree" it builds is a (set of) Prolog terms. The design can be extended to process other XML data which requires "complete" processing in Java before data is passed to Prolog.</p>
<p class="p6"><b>Prolog API</b></p>
<p class="p13"><br></p>
<p class="p6">These Prolog predicates reflect the functionality of the previously described Java classes. We will only provide a description of the most important ones here. We refer the reader to <b>xml_converter.pl</b> - where a few 2-3 line predicates describe this API in a self-documenting way.<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p6"><b>prolog2xml(PrologFileOrURL,XMLFile): </b>Reflection based interface for Prolog-to-XML converter. The converter takes a file or URL containing Prolog clauses and builts an XML representation in another file.</p>
<p class="p13"><br></p>
<p class="p6"><b>xml2prolog_parser(XMLFileorURL,Terms): </b>Converter from XML represented Prolog trees to Prolog terms - uses a DCG parser to aggregate low level SAX parser events.</p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<p class="p6"><b>xml_event_of(FileOrURL,Event):</b> backtracks over the set of XML events resulting from calling the SAX parser on a file or URL.</p>
<p class="p13"><br></p>
<p class="p6"><b>xml_term_of(FileOrURL,Term): </b>backtracks over the set of XML represneted Prolog terms resulting from calling the SAX parser on a file or URL containing such terms</p>
<p class="p13"><br></p>
<p class="p6">You can use <b>findall/3</b> to collect all events - or the <b>get/2</b> a<b> </b>predicate of a new engine to explore the stream of events produced by the last two predicates through a recursive loop.</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
</body>
</html>
