package agentgui;

import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class ControlButtons extends JPanel {

	public ControlButtons(String name, VFrame vframe) {
		super();

		setLayout(new BorderLayout());

		JLabel label = new JLabel(name);

		add(label, BorderLayout.PAGE_START);
		{
			JPanel cpane = new JPanel();

			int NUMBER_OF_ROWS = 3;

			cpane.setLayout(new GridLayout(NUMBER_OF_ROWS, 1));
			{ // row 1
				String names[] = { 
						"OracleDB", "PlayBackFile", "WatchList",
						"UnFilteredChat","FilteredChat","ReportGenerator"
			    };
				Runnable runnables[] = new Runnable[names.length];
				cpane.add(new VButtons("ControlButtons", names, runnables));
			}
			{ // row 2
				String names[] = { "ChatNetwork", "AgentNetwork", "TopicNetwork", "RecruitmentNetwork"};
				Runnable runnables[] = new Runnable[names.length];

				cpane.add(new VButtons("Visualisation", names, runnables));
			}
			{ // row 3
				String names[] = {"SAVE","REGISTRY","START","STOP","YAHOO","IRC"};
				Runnable runnables[] = new Runnable[names.length];
				
				// TODO: add specific actions to buttons matching each button name
				//Runnable myRunnable= ...;
				//runnables[i] = myRunnable;
				
				cpane.add(new VButtons("SystemButtons", names, runnables));
			}
			add(cpane, BorderLayout.CENTER);
		}
	}

	/*
	protected static ImageIcon createImageIcon(String path) {
		
		 * java.net.URL imgURL = ControlButtons.class.getResource(path); if
		 * (imgURL != null) { return new ImageIcon(imgURL); } else {
		 * System.err.println("Couldn't find file: " + path); return null; }
		 
		return null;
	}
    */
	
	public static InnerFrame toInnerFrame(VFrame vframe) {
		InnerFrame frame = new InnerFrame("ControlButtons", 0, 0, 640, 480);
		ControlButtons newContentPane = new ControlButtons("", vframe);
		newContentPane.setOpaque(true); // content panes must be opaque
		frame.setContentPane(newContentPane);
		return frame;
	}

}

class VButtons extends JPanel {
	VButtons(String name, String[] names, Runnable[] runnables) {
		super();

		setLayout(new BorderLayout());

		JLabel label = new JLabel(name);
		add(label, BorderLayout.PAGE_START);
		int l = names.length;
		if (null == runnables)
			runnables = new Runnable[l];
		else {
			int r = runnables.length;
			if (l != r)
				System.err
						.println("names and runnables should have the same length="
								+ l + "<>" + r);
		}
		JPanel cpane = new JPanel();
		for (int i = 0; i < l; i++) {
			cpane.setLayout(new GridLayout(1, l));
			VButton button = new VButton(names[i], runnables[i]);
			// button.setPreferredSize(new Dimension(200, 100));

			cpane.add(button);

		}
		add(cpane);
	}
}

class VButton extends JButton implements ActionListener {
	VButton(String name, Runnable runnable) {
		super(name);
		this.runnable = runnable;
		setActionCommand(name);
		addActionListener(this);
	}

	VButton(String name) {
		this(name, null);
	}

	private Runnable runnable;

	public void actionPerformed(final ActionEvent e) {
		if (null == runnable) {
			SwingUtilities.invokeLater(new Runnable() {
				public void run() {
					System.out.println("TODO add runnable to="+e.getActionCommand());
				}
			});
		} else {
			SwingUtilities.invokeLater(runnable);
		}
	}

}
