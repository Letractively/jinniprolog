:-[gui_agent].

slowness(200). % time between steps in ms

maxsteps(3).

% try also new_console instead of new_ide

vivo_agent(Goal,Port):-vivo_agent(Port,Goal,Port). 

vivo_agent(WinName,Goal,Port):-
  self<=Port,
  finished<=no,
  gui_agent(new_console,WinName,Port,Goal). 

vivo_wait:-sleep(200000),halt.

vivo_stop:-
  finished<==yes,
  agent_stop,
  bg(and(sleep(1),halt)).
  
event_source:-
  sleep(3),
  maxsteps(Max),
  slowness(MS),
  for(I,1,Max),
    sleep_ms(MS),
    println(sent=event(I)),
    bg(rli_out(agent2,event(I))),
    bg(rli_out(agent3,event(I))),
  fail.
  
event_target:-
  self=>To,
  sleep(3),
  maxsteps(Max),
  for(_,1,Max),
    rli_in(To,Mes),
    println(received=Mes),
  fail.

